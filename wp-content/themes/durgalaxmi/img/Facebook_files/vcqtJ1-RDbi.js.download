;/*FB_PKG_DELIM*/

__d("MAWDbThread",["MAWHexUtils","MAWJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+b}e=a(d("WATimeUtils").castToMillisTime(0),d("MAWJids").toUserJid("0"));function b(a){return a}function c(a){return a}g.craftThreadOrder=a;g.MIN_THREAD_ORDER=e;g.unsafeCoerceToChatId=b;g.convertNumbersToChatIds=c}),98);
__d("MAWDbMsg",["FBLogger","MAWDbThread","MAWHexUtils","OfflineThreadingId.bs","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("WAMsgType").MSG_TYPE.REVOKED,d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,d("WAMsgType").MSG_TYPE.GROUP_INVITE,d("WAMsgType").MSG_TYPE.SK_DISTRIBUTION];function a(a){return q(a)?a:null}var i="futureproof",j="toBeRead",k="spam",l="futureproof_spam",m=void 0,n="e2ee_admin_msg",o="cutover_admin_msg";function p(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m"}function b(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_DEBUG_"+d("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4))}function q(a){var b=a.indexOf("_");if(b<=0)return!1;b=a.indexOf("_",b+2);return b!==a.length-2?!1:a.charAt(a.length-1)==="m"}function e(a){return a+"_"+j}function f(a){return a+"_"+n}function r(a){return a+"_"+o}function s(a){a=a.split("_");a=a[0];return d("MAWDbThread").unsafeCoerceToChatId(d("MAWHexUtils").reverseOrderPreservingHex(a))}function t(a){a=a.split("_");a[0];a=a[1];return d("MAWHexUtils").reverseOrderPreservingHex(a)}function u(a){return d("MAWHexUtils").orderPreservingHex(a)+"_"}function v(a){return d("MAWHexUtils").orderPreservingHex(a)+"_z"}function w(a){try{var b=s(a);a=t(a);return p(b,a+1)+"_o"}catch(a){return d("OfflineThreadingId.bs").make()}}function x(a){switch(a.type){case d("WAMsgType").MSG_TYPE.XMA:return!0;case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:return!1}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',a.type)}function y(a){switch(a.type){case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:return!0;case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.XMA:return!1}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',a.type)}function z(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.XMA:return!0;case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.SK_DISTRIBUTION:return!1}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',a.type)}function A(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.XMA:return!0;case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.SK_DISTRIBUTION:return!1}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',a.type)}function B(a){return D(a.type)}function C(a){return a.type===d("WAMsgType").MSG_TYPE.ADMIN}function D(a){return a==="EphemeralSyncResponse"||a==="EphemeralSettingChangeFromCurrentDevice"||a==="GroupInvite"||a==="SenderKeyDistribution"}function E(a){return a.serverTs!=null?a.serverTs:a.ts}function F(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return E(a)*1e3}function G(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function H(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:return a.msgContent;case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.XMA:return}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',a.type)}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=h;g.toMsgId=a;g.FUTUREPROOF_ALT_INDEX=i;g.TO_BE_READ_ALT_INDEX_SUFFIX=j;g.SPAM_ALT_INDEX=k;g.FUTUREPROOF_SPAM_ALT_INDEX=l;g.UNDEFINED_ALT_INDEX=m;g.E2EE_ADMIN_MSG_ALT_INDEX=n;g.CUTOVER_ADMIN_MSG_ALT_INDEX=o;g.craftMsgId=p;g.craftDebugMsgId=b;g.isValidMsgId=q;g.craftToBeReadAltIndex=e;g.craftE2eeAdminMsgAltIndex=f;g.craftCutoverAdminMsgAltIndex=r;g.getThreadIdFromMsgId=s;g.getInChatMsgIdFromMsgId=t;g.msgIdsInChatLowerBound=u;g.msgIdsInChatUpperBound=v;g.getNextOptimisticId=w;g.isXMAMsg=x;g.isMediaMsg=y;g.isContentMsg=z;g.isMsgEligibleForTriggeringEphemeralSyncResponse=A;g.isUnrenderedMsg=B;g.isAdminMsg=C;g.isUnrenderedMsgType=D;g.getCanonicalTsFromMsg=E;g.getSortOrderWithFallback=F;g.getSortOrderFromPrevious=G;g.getMsgContent=H}),98);
__d("dexie_alpha",["dexie-3.2.2"],(function(a,b,c,d,e,f){e.exports=b("dexie-3.2.2")()}),null);
__d("MAWDexieTable",["Promise","dexie_alpha"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return b("Promise").resolve(a)}function a(a){return a.reduce(function(a,b,c){return a.then(function(a){return b(c).then(function(b){a.push(b);return a})})},l([]))}function e(a){return c("dexie_alpha").Promise.all(a)}function f(a){return c("dexie_alpha").Promise.PSD[a]}function i(a,b){c("dexie_alpha").Promise.PSD[a]=b}function j(a){c("dexie_alpha").Promise.PSD[a]=void 0}var k=function(){function a(a,b,d){d===void 0&&(d=!0);var e=new(c("dexie_alpha"))(a,{chromeTransactionDurability:"relaxed"});b(e);this.name=a;this.stores=e;d&&this.open()}var b=a.prototype;b.open=function(){this.stores.open()};b.close=function(){this.stores.close()};b.transact=function(a,b,c){var d=this;return h(this.stores.transaction(a,b.map(function(a){return d.stores[a]}),function(){return c()}))};return a}();function l(a){return c("dexie_alpha").Promise.resolve(a)}function m(a){return c("dexie_alpha").waitFor(a)}g.DEXIE_MIN_KEY=d("dexie_alpha").Dexie.minKey;g.DEXIE_MAX_KEY=d("dexie_alpha").Dexie.maxKey;g.undexify=h;g.dexieSequentialAll=a;g.dexieAll=e;g.getDexiePSDItem=f;g.setDexiePSDItem=i;g.clearDexiePSDItem=j;g.DexieTable=k;g.dexieResolve=l;g.dexieExpensiveAwait=m}),98);
__d("MAWLocalizationType",[],(function(a,b,c,d,e,f){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";d="unknownUserCreatedGroup";e="currentUserNamedGroup";var g="unkonwnUserNamedGroup",h="participantNamedGroup",i="currentUserAddedDevice",j="participantAddedDevice",k="currentUserRemovedDevice",l="participantRemovedDevice",m="currentUserUpdatedDevice",n="participantUpdatedDevice",o="currentUserAddedOneParticipant",p="currentUserAddedTwoParticipant",q="currentUserAddedMoreThanTwoParticipant",r="participantAddedYou",s="participantAddedYouAndOneUser",t="participantAddedYouAndMoreThanOneUsers",u="unknowUserAddedYou",v="unknowUserAddedYouAndOneUser",w="unknowUserAddedYouAndMoreThanOneUser",x="unknownUserAddedOneUser",y="unknownUserAddedTwoUser",z="unknownUserAddedMoreThanTwoUser",A="participantAddedOneUser",B="participantAddedTwoUser",C="participantAddedMoreThanTwoUser",D="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",F="currentUserRemovedMoreThanTwoParticipant",G="participantRemovedYou",H="participantRemovedYouAndOneUser",I="participantRemovedYouAndMoreThanOneUsers",J="unknowUserRemovedYou",K="unknowUserRemovedYouAndOneUser",L="unknowUserRemovedYouAndMoreThanOneUser",M="unknownUserRemovedOneUser",N="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",P="participantRemovedOneUser",Q="participantRemovedTwoUser",R="participantRemovedMoreThanTwoUser",S="participantLeftGroup",T="currentUserLeftGroup",U="currentUserGotPromoted",V="currentUserGotDemoted",W="participantGotPromoted",X="participantGotDemoted",Y="participantPromotedYou",Z="participantDemotedYou",$="currentUserPromotedParticipant",aa="currentUserDemotedParticipant",ba="participantDemotedParticipant",ca="participantPromotedParticipant",da="participantSelfDemoted",ea="currentUserSelfDemoted",fa="currentUserSendText",ga="currentUserSendImage",ha="currentUserSendVideo",ia="currentUserSendAudio",ja="currentUserSendGif",ka="currentUserSendSticker",la="participantSendText",ma="participantSendTextInGroup",na="participantSendImage",oa="participantSendVideo",pa="participantSendAudio",qa="participantSendGif",ra="participantSendSticker",sa="unavailableSnippet",ta="twoUsersConnected",ua="reachabilityError",va="unknownUserEphemeralSettingTurnedOnSeconds",wa="unknownUserEphemeralSettingTurnedOnMinutes",xa="unknownUserEphemeralSettingTurnedOnHours",ya="unknownUserEphemeralSettingTurnedOnDays",za="youEphemeralSettingTurnedOnSeconds",Aa="youEphemeralSettingTurnedOnMinutes",Ba="youEphemeralSettingTurnedOnHours",Ca="youEphemeralSettingTurnedOnDays",Da="participantEphemeralSettingTurnedOnSeconds",Ea="participantEphemeralSettingTurnedOnMinutes",Fa="participantEphemeralSettingTurnedOnHours",Ga="participantEphemeralSettingTurnedOnDays",Ha="unknownUserEphemeralSettingChangeSeconds",Ia="unknownUserEphemeralSettingChangeMinutes",Ja="unknownUserEphemeralSettingChangeHours",Ka="unknownUserEphemeralSettingChangeDays",La="youEphemeralSettingChangeSeconds",Ma="youEphemeralSettingChangeMinutes",Na="youEphemeralSettingChangeHours",Oa="youEphemeralSettingChangeDays",Pa="participantEphemeralSettingChangeSeconds",Qa="participantEphemeralSettingChangeMinutes",Ra="participantEphemeralSettingChangeHours",Sa="participantEphemeralSettingChangeDays",Ta="unknownUserEphemeralSettingTurnedOff",Ua="youEphemeralSettingTurnedOff",Va="participantEphemeralSettingTurnedOff",Wa="currentUserUnsentMessage",Xa="participantUnsentMessage",Ya="participantReactMessage",Za="participantReactMessageInGroup",$a="unknownUserEphemeralTakeScreenshot",ab="unknownUserEphemeralRecordScreen",bb="youEphemeralTakeScreenshot",cb="youEphemeralRecordScreen",db="participantEphemeralTakeScreenshot",eb="participantEphemeralRecordScreen",fb="icdcAlertAdminMessage",gb="yourDeviceICDCAlertAdminMessage",hb="cutoverThreadAdminMessage",ib="cutoverRollbackAdminMessage",jb="currentUserSendAttachment",kb="participantSendAttachment",lb="currentUserSentStory",mb="participantSentStory",nb="e2eeThreadDescription",ob="debugMsg",pb={CURRENT_USER_ADDED_DEVICE:i,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:q,CURRENT_USER_ADDED_ONE_PARTICIPANT:o,CURRENT_USER_ADDED_TWO_PARTICIPANTS:p,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_DEMOTED_PARTICIPANT:aa,CURRENT_USER_GOT_DEMOTED:V,CURRENT_USER_GOT_PROMOTED:U,CURRENT_USER_LEFT_GROUP:T,CURRENT_USER_NAMED_GROUP:e,CURRENT_USER_PROMOTED_PARTICIPANT:$,CURRENT_USER_REMOVED_DEVICE:k,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:F,CURRENT_USER_REMOVED_ONE_PARTICIPANT:D,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SELF_DEMOTED:ea,CURRENT_USER_SEND_ATTACHMENT:jb,CURRENT_USER_SEND_AUDIO:ia,CURRENT_USER_SEND_GIF:ja,CURRENT_USER_SEND_IMAGE:ga,CURRENT_USER_SEND_STICKER:ka,CURRENT_USER_SEND_TEXT:fa,CURRENT_USER_SEND_VIDEO:ha,CURRENT_USER_SENT_STORY:lb,CURRENT_USER_UNSENT_MESSAGE:Wa,CURRENT_USER_UPDATED_DEVICE:m,CUTOVER_ROLLBACK_ADMIN_MESSAGE:ib,CUTOVER_THREAD_ADMIN_MESSAGE:hb,DEBUG_MSG:ob,E2EE_THREAD_DESCRIPTION:nb,EMPTY_SNIPPET:a,ICDC_ALERT_ADMIN_MESSAGE:fb,PARTICIPANT_ADDED_DEVICE:j,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:C,PARTICIPANT_ADDED_ONE_USER:A,PARTICIPANT_ADDED_TWO_USER:B,PARTICIPANT_ADDED_YOU:r,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:t,PARTICIPANT_ADDED_YOU_AND_ONE_USER:s,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_DEMOTED_PARTICIPANT:ba,PARTICIPANT_DEMOTED_YOU:Z,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:eb,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:Sa,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:Ra,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:Qa,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:Pa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:Va,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ga,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Fa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ea,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Da,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:db,PARTICIPANT_GOT_DEMOTED:X,PARTICIPANT_GOT_PROMOTED:W,PARTICIPANT_LEFT_GROUP:S,PARTICIPANT_NAMED_GROUP:h,PARTICIPANT_PROMOTED_PARTICIPANT:ca,PARTICIPANT_PROMOTED_YOU:Y,PARTICIPANT_REACT_MESSAGE:Ya,PARTICIPANT_REACT_MESSAGE_IN_GROUP:Za,PARTICIPANT_REMOVED_DEVICE:l,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:R,PARTICIPANT_REMOVED_ONE_USER:P,PARTICIPANT_REMOVED_TWO_USER:Q,PARTICIPANT_REMOVED_YOU:G,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:I,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:H,PARTICIPANT_SELF_DEMOTED:da,PARTICIPANT_SEND_ATTACHMENT:kb,PARTICIPANT_SEND_AUDIO:pa,PARTICIPANT_SEND_GIF:qa,PARTICIPANT_SEND_IMAGE:na,PARTICIPANT_SEND_STICKER:ra,PARTICIPANT_SEND_TEXT:la,PARTICIPANT_SEND_TEXT_IN_GROUP:ma,PARTICIPANT_SEND_VIDEO:oa,PARTICIPANT_SENT_STORY:mb,PARTICIPANT_UNSENT_MESSAGE:Xa,PARTICIPANT_UPDATED_DEVICE:n,REACHABILITY_ERROR:ua,TWO_USERS_CONNECTED:ta,UNAVAILABLE_SNIPPET:sa,UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:z,UNKNOW_USER_ADDED_ONE_USER:x,UNKNOW_USER_ADDED_TWO_USER:y,UNKNOW_USER_ADDED_YOU:u,UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOW_USER_ADDED_YOU_AND_ONE_USER:v,UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOW_USER_REMOVED_ONE_USER:M,UNKNOW_USER_REMOVED_TWO_USER:N,UNKNOW_USER_REMOVED_YOU:J,UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:L,UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:K,UNKNOWN_USER_CREATED_GROUP:d,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:ab,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Ka,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:Ja,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Ia,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:Ha,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:Ta,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:ya,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:xa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:wa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:va,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:$a,UNKNOWN_USER_NAMED_GROUP:g,YOU_EPHEMERAL_RECORD_SCREEN:cb,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:Oa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Na,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:Ma,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:La,YOU_EPHEMERAL_SETTING_TURNED_OFF:Ua,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ca,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:Ba,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Aa,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:za,YOU_EPHEMERAL_TAKE_SCREENSHOT:bb,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:gb};f.EMPTY_SNIPPET=a;f.CURRENT_USER_CREATED_GROUP=b;f.PARTICIPANT_CREATED_GROUP=c;f.UNKNOWN_USER_CREATED_GROUP=d;f.CURRENT_USER_NAMED_GROUP=e;f.UNKNOWN_USER_NAMED_GROUP=g;f.PARTICIPANT_NAMED_GROUP=h;f.CURRENT_USER_ADDED_DEVICE=i;f.PARTICIPANT_ADDED_DEVICE=j;f.CURRENT_USER_REMOVED_DEVICE=k;f.PARTICIPANT_REMOVED_DEVICE=l;f.CURRENT_USER_UPDATED_DEVICE=m;f.PARTICIPANT_UPDATED_DEVICE=n;f.CURRENT_USER_ADDED_ONE_PARTICIPANT=o;f.CURRENT_USER_ADDED_TWO_PARTICIPANTS=p;f.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS=q;f.PARTICIPANT_ADDED_YOU=r;f.PARTICIPANT_ADDED_YOU_AND_ONE_USER=s;f.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS=t;f.UNKNOW_USER_ADDED_YOU=u;f.UNKNOW_USER_ADDED_YOU_AND_ONE_USER=v;f.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER=w;f.UNKNOW_USER_ADDED_ONE_USER=x;f.UNKNOW_USER_ADDED_TWO_USER=y;f.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER=z;f.PARTICIPANT_ADDED_ONE_USER=A;f.PARTICIPANT_ADDED_TWO_USER=B;f.PARTICIPANT_ADDED_MORE_THAN_TWO_USER=C;f.CURRENT_USER_REMOVED_ONE_PARTICIPANT=D;f.CURRENT_USER_REMOVED_TWO_PARTICIPANTS=E;f.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS=F;f.PARTICIPANT_REMOVED_YOU=G;f.PARTICIPANT_REMOVED_YOU_AND_ONE_USER=H;f.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS=I;f.UNKNOW_USER_REMOVED_YOU=J;f.UNKNOW_USER_REMOVED_YOU_AND_ONE_USER=K;f.UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER=L;f.UNKNOW_USER_REMOVED_ONE_USER=M;f.UNKNOW_USER_REMOVED_TWO_USER=N;f.UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER=O;f.PARTICIPANT_REMOVED_ONE_USER=P;f.PARTICIPANT_REMOVED_TWO_USER=Q;f.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER=R;f.PARTICIPANT_LEFT_GROUP=S;f.CURRENT_USER_LEFT_GROUP=T;f.CURRENT_USER_GOT_PROMOTED=U;f.CURRENT_USER_GOT_DEMOTED=V;f.PARTICIPANT_GOT_PROMOTED=W;f.PARTICIPANT_GOT_DEMOTED=X;f.PARTICIPANT_PROMOTED_YOU=Y;f.PARTICIPANT_DEMOTED_YOU=Z;f.CURRENT_USER_PROMOTED_PARTICIPANT=$;f.CURRENT_USER_DEMOTED_PARTICIPANT=aa;f.PARTICIPANT_DEMOTED_PARTICIPANT=ba;f.PARTICIPANT_PROMOTED_PARTICIPANT=ca;f.PARTICIPANT_SELF_DEMOTED=da;f.CURRENT_USER_SELF_DEMOTED=ea;f.CURRENT_USER_SEND_TEXT=fa;f.CURRENT_USER_SEND_IMAGE=ga;f.CURRENT_USER_SEND_VIDEO=ha;f.CURRENT_USER_SEND_AUDIO=ia;f.CURRENT_USER_SEND_GIF=ja;f.CURRENT_USER_SEND_STICKER=ka;f.PARTICIPANT_SEND_TEXT=la;f.PARTICIPANT_SEND_TEXT_IN_GROUP=ma;f.PARTICIPANT_SEND_IMAGE=na;f.PARTICIPANT_SEND_VIDEO=oa;f.PARTICIPANT_SEND_AUDIO=pa;f.PARTICIPANT_SEND_GIF=qa;f.PARTICIPANT_SEND_STICKER=ra;f.UNAVAILABLE_SNIPPET=sa;f.TWO_USERS_CONNECTED=ta;f.REACHABILITY_ERROR=ua;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=va;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES=wa;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS=xa;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS=ya;f.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS=za;f.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES=Aa;f.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS=Ba;f.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS=Ca;f.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS=Da;f.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES=Ea;f.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS=Fa;f.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS=Ga;f.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS=Ha;f.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES=Ia;f.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS=Ja;f.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS=Ka;f.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS=La;f.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES=Ma;f.YOU_EPHEMERAL_SETTING_CHANGE_HOURS=Na;f.YOU_EPHEMERAL_SETTING_CHANGE_DAYS=Oa;f.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS=Pa;f.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES=Qa;f.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS=Ra;f.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS=Sa;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF=Ta;f.YOU_EPHEMERAL_SETTING_TURNED_OFF=Ua;f.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF=Va;f.CURRENT_USER_UNSENT_MESSAGE=Wa;f.PARTICIPANT_UNSENT_MESSAGE=Xa;f.PARTICIPANT_REACT_MESSAGE=Ya;f.PARTICIPANT_REACT_MESSAGE_IN_GROUP=Za;f.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=$a;f.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN=ab;f.YOU_EPHEMERAL_TAKE_SCREENSHOT=bb;f.YOU_EPHEMERAL_RECORD_SCREEN=cb;f.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT=db;f.PARTICIPANT_EPHEMERAL_RECORD_SCREEN=eb;f.ICDC_ALERT_ADMIN_MESSAGE=fb;f.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE=gb;f.CUTOVER_THREAD_ADMIN_MESSAGE=hb;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=ib;f.CURRENT_USER_SEND_ATTACHMENT=jb;f.PARTICIPANT_SEND_ATTACHMENT=kb;f.CURRENT_USER_SENT_STORY=lb;f.PARTICIPANT_SENT_STORY=mb;f.E2EE_THREAD_DESCRIPTION=nb;f.DEBUG_MSG=ob;f.LOCALIZATION_TYPE=pb}),66);
__d("SignalDbTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a+"_"+b+"_"+c}b={abProps:"abProps",authKeyPair:"authKeyPair",cat:"cat",clockSkew:"clockSkew",deviceId:"deviceId",deviceUUID:"deviceUUID",edgeInfo:"edgeInfo",fbid:"fbid",identityKeyPair:"identityKeyPair",lastPrekeyGenerationId:"lastPrekeyGenerationId",lastPrekeyId:"lastPrekeyId",lastSignedPrekeyId:"lastSignedPrekeyId",regId:"regId",registrationVersion:"registrationVersion"};c={msgrDeviceId:"msgrDeviceId"};f.buildSenderKeySessionId=a;f.MetaKeysEnum=b;f.DEPRECATED_MetaKeys=c}),66);
__d("WAOdsEnums",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MSG_ENCRYPTION:"armadillo_message_encryption",MSG_DECRYPTION:"armadillo_message_decryption",GET_DEVICES:"armadillo_get_devices",DEVICE_REREG_CHECK:"armadillo_device_rereg_check",DEVICE_REGISTRATION:"armadillo_device_registration",DEVICE_REGISTRATION_NON_EMPLOYEE:"armadillo_device_registration_non_employee",PHASH_MISMATCH:"phash_mismatch",WEB_PLACEHOLDER:"armadillo_web_placeholder",PREKEY_UPLOAD:"armadillo_prekey_upload",PREKEY_DIGEST:"armadillo_prekey_digest",C2C_META_SYNC:"armadillo_c2c_meta_sync",ADMIN_MESSAGE:"armadillo_admin_message",PREVIEW_SNIPPET:"armadillo_snippet",TOTAL_INCOMING_MESSAGE:"armadillo_total_incoming_message",COMPARE_IDENTITY:"armadillo_compare_identity",GET_PREKEY:"armadillo_get_prekey",SECURITY_ALERT_FOR_CONTACT:"armadillo_security_alert_for_contact",SECURITY_ALERT_FOR_SELF:"armadillo_security_alert_for_self",WA_DISCONNECT:"armadillo_disconnect",GROUP_CREATE:"armadillo_group_create",GROUP_DELETE:"armadillo_group_delete",GROUP_ADD_PARTICIPANT:"armadillo_group_add_participant",GROUP_PROMOTE_PARTICIPANT:"armadillo_group_promote_participant",GROUP_DEMOTE_PARTICIPANT:"armadillo_group_demote_participant",GROUP_REMOVE_PARTICIPANT:"armadillo_group_remove_participant",GROUP_LEAVE_PARTICIPANT:"armadillo_group_leave_participant",SEND_READ_RECEIPTS:"armadillo_send_read_receipts",MESSAGE_MISSING_THREAD_JID:"MESSAGE_MISSING_THREAD_JID",MESSAGE_MISSING:"MESSAGE_MISSING"});f.Entity=a}),66);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a}),66);
__d("MAWDbVersion",["MAWBridge","MAWDbMsg","MAWDbThread","MAWDexieTable","MAWFolderTypes","MAWGating","MAWLocalizationType","MAWTimeUtils.bs","MAWWaitForBackendSetup","Promise","SignalDbTypes","WAJids","WALogger","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","dexie_alpha","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB] version is not set in QE"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB] maybe version: ",""]);i=function(){return a};return a}var j={appData:"++appDataId,&externalId",appMeta:"key",browserEncryptionMeta:"++id, &version",chunk:"++chunkId, &hashedPlaintextHash",contacts:"contactJid",existingUsers:"id",ftsBackloggedMessages:"rowId",ftsEncryptionMeta:"key",ftsIndexV3:"++ftsRowId,id,chatId,*prefixes",groupInfo:"groupJid,threadId",identity:"deviceJid",jobs:"++jobId,&uniqKey",media:"++mediaId, &hashedPlaintextHash, *msgIds",messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId",meta:"key",participants:"id,threadId,userJid",pendingReceipts:"id",pendingStanzas:"++rowId,externalIdWithType",personalSenderKeyStatuses:"groupJid",prekey:"keyId",prekeyGeneration:"generationId",reactions:"++rowId,reactionId,externalId,reactToMsgId,threadJid,reactToExternalId",receipts:"msgId",senderKeySessions:"id,groupJid,userJid",session:"id",signedPrekey:"keyId",tasks:"taskName",threads:"++chatId,&jid,threadOrder",unrenderedMessages:"++rowId,externalId,thread,msgId"},k={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs"},l={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId"},m={isDualSend:"++rowId"},n={historySyncQRCodeSecretKey:"key"},o={unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs"},p={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId,threadJid",unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs,threadJid"},q={groupInvites:"invitedParticipantId, inviterJid"},r={pendingStanzas:"++rowId,externalIdWithType, deleteTs"},s={media:"++mediaId, &hashedPlaintextHash, *msgIds, &objectId, &fbid"},t={dualSendMedia:"++id"},u={xma:"++xmaId, associatedMessageId, faviconMediaId, headerMediaId, targetExpiringAtSec, defaultPreviewMediaId"},v={historySyncQRCodeData:"rowId"},w={xma:"++xmaId, externalId, associatedMessageId, faviconMediaId, headerMediaId, targetExpiringAtSec, defaultPreviewMediaId"},x={dyiBatch:"++batchId"},y={groupInfo:"groupJid,threadId,correspondingOpenThreadKey"},z=null;z={groupInvites:z};var A={groupInvites:"[invitedParticipantId+inviterJid], inviterJid"},B={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId,threadJid,[thread+sortOrderMs]",unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs,threadJid,[thread+sortOrderMs]"},C={syncActions:"index,collection,actionState,indexMac,action,[modelId+modelType+actionState]"},D={missingKeys:"keyHex"},E={pendingMutations:"++id,action,index,collection"},F={collectionVersions:"++id,&collection"},G={syncKeys:"++id,&keyId,keyEpoch"},H={identity:"deviceJid,userJid"},I={uploadRetryStatus:"[externalId+lastRetryTs], lastRetryTs, traceId"},J={stanzaQueue:"++stanzaQueueId,stanzaId,jid,type"},K={deviceChangeAlerts:"++deviceChangeAlertsId"},L={retroactiveBackupsState:"threadId"},M={threads:"++chatId,&jid,threadOrder,&deduplicationKey"},N={mediaBackup:"++mediaBackupId,&objectId,mediaId,msgId"},O=function(a){var b=function(a){var b;b=(b=a.quote)==null?void 0:b.content;return a.quoteExternalId!=null&&(b==null?void 0:b.media)!=null};return a.messages.where("quoteExternalId").between(d("WAStanzaUtils").toStanzaId("0"),d("WAStanzaUtils").toStanzaId("["),!0,!0).filter(b).toArray()["catch"](function(){return a.messages.filter(b).toArray()}).then(function(b){var c=new Set(b.map(function(a){a=(a=a.quote)==null?void 0:a.content;return a==null?void 0:(a=a.media)==null?void 0:a.plaintextHash}).filter(Boolean)),d=b.map(function(a){a=a.msgId;return a});return a.media.filter(function(a){a=a.plaintextHash;return c.has(a)}).toArray().then(function(b){var c=new Map(b.map(function(a){var b=a.mediaId;a=a.plaintextHash;return[a,b]}));return a.messages.where("msgId").anyOf(d).modify(function(a){var b;b=(b=a.quote)==null?void 0:b.content;a.quote.content.mediaId=c.get(b.media.plaintextHash);delete a.quote.content.media})})})},P=function(a){return a.groupInfo.toCollection().modify(function(a){typeof a.inviter==="number"&&delete a.inviter})},Q=function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.deviceId).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.deviceId)!=null&&typeof b.value.deviceId!=="number")return a.meta.clear()})},R=function(a){return a.threads.filter(function(a){return d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return!1},user:function(){return a.oldestMsg!=null}})}).toArray().then(function(b){var c=[];b.forEach(function(a){c.push(a.oldestMsg),c.push(a.newestMsg)});return a.messages.where("msgId").anyOf(c.filter(Boolean)).toArray().then(function(c){var e=new Map(),f=[],g=[];c.forEach(function(a){e.set(a.msgId,a)});b.forEach(function(b){var c=e.get(b.oldestMsg),h=e.get(b.newestMsg);(c==null?void 0:c.type)==="Admin"&&(h==null?void 0:h.type)==="Admin"&&(c.msgId===h.msgId?g.push(b.chatId):f.push(b));return d("MAWDexieTable").dexieAll(f.map(function(b){return a.messages.where("thread").equals(b.chatId).toArray()})).then(function(b){b.forEach(function(a){if(a.length===0)return;var b=a[0].thread;a=a.filter(function(a){return a.type!=="Admin"});if(a.length>0)return;g.push(b)});return d("MAWDexieTable").dexieAll([a.threads.bulkDelete(g),a.messages.where("thread").anyOf(g)["delete"]()])})})})})},S=function(a){return a.unrenderedMessages.toCollection().modify(function(a){if(a.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var b=a.messageDeleteForMeTs;a.messageDeleteForMeTs=b}})},T=function(a){var b=0,e=0,f=c("dexie_alpha").currentTransaction;if(f==null)throw c("unrecoverableViolation")("transaction does not exist","messenger_e2ee_web");f.on("complete",function(){c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("DB upgrade to V31").then(function(){b>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}))});f.on("complete",function(){b>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})});return a.threads.toArray().then(function(c){var f=c.reduce(function(a,b){b!=null&&a.set(b.chatId,b);return a},new Map());return d("MAWDexieTable").dexieAll([a.messages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:(a.threadJid=null,b+=1)}else e+=1}),a.unrenderedMessages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:(a.threadJid=null,b+=1)}else e+=1})])})},U=function(a){return a.isDualSend.toCollection().modify(function(a){a.version==null&&(a.version=1)})},V=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(a.altIndex=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.thread))})},W=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},X=function(a){return a.threads.toCollection().modify(function(a){a.folder==null&&(a.folder=d("MAWFolderTypes").FOLDER_ID.INBOX)})},aa=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},ba=function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})},ca=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&a.sortOrderMs!=null&&a.sortOrderMs>0&&(a.sortOrderMs=0)})},da=function(a){return a.messages.toCollection().modify(function(a){!(a.type===d("WAMsgType").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&a.sortOrderMs!=null&&a.sortOrderMs<1661204086&&(a.sortOrderMs=d("MAWDbMsg").getCanonicalTsFromMsg(a)*1e3)})},ea=function(a){return a.threads.filter(function(a){return a.isMigratedLocally===!0&&a.newestMsg!=null}).toArray().then(function(b){var c=b.map(function(a){return a.chatId}),e=new Map();return d("MAWDexieTable").dexieAll(b.map(function(b){return a.messages.where(["thread","sortOrderMs"]).between([b.chatId,0],[b.chatId,Number.MAX_VALUE]).last().then(function(a){a!=null&&e.set(a.thread,a.msgId)})})).then(function(){return a.threads.where("chatId").anyOf(c).modify(function(a){var b=e.get(a.chatId);b!=null&&(a.newestMsg=b)})})})},fa=function(a){return a.identity.toCollection().modify(function(a){a.userJid=d("WAJids").extractUserJid(a.deviceJid)})},ga=function(a){return a.threads.toCollection().modify(function(a){a.lastReadMsgTs!=null&&a.lastReadMsgTs<d("WATimeUtils").MAX_INT&&(a.lastReadMsgTs=d("MAWTimeUtils.bs").getMillisTime(a.lastReadMsgTs));if(a.newestMsgTs!=null&&a.newestMsgTs<d("WATimeUtils").MAX_INT){var b=d("MAWTimeUtils.bs").getMillisTime(a.newestMsgTs);a.newestMsgTs=b;b!=null&&(a.threadOrder=d("MAWDbThread").craftThreadOrder(b,a.jid))}})},ha=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(a.altIndex=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(a.thread))})},ia=function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.fbid).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.fbid)!=null&&b.value.fbid==="0")return a.meta.clear()})},Y=[{schema:j,version:21},{schema:k,version:22},{schema:l,version:23},{schema:m,version:24},{schema:n,version:25},{upgrade:O,version:26},{upgrade:P,version:27},{upgrade:Q,version:28},{upgrade:R,version:29},{schema:o,upgrade:S,version:30},{schema:p,upgrade:T,version:31},{schema:q,version:32},{schema:r,version:33},{schema:s,version:34},{schema:t,version:35},{schema:u,version:36},{schema:v,version:37},{schema:w,version:38},{schema:x,version:39},{schema:y,version:40},{schema:z,version:41},{schema:A,version:42},{upgrade:U,version:43},{upgrade:V,version:44},{schema:B,upgrade:W,version:45},{upgrade:X,version:46},{upgrade:aa,version:47},{schema:C,version:48},{schema:D,version:49},{schema:E,version:50},{schema:F,version:51},{schema:G,version:52},{upgrade:ba,version:53},{upgrade:ca,version:54},{upgrade:da,version:55},{upgrade:ea,version:56},{schema:H,upgrade:fa,version:57},{upgrade:ga,version:58},{schema:I,version:59},{upgrade:ha,version:60},{schema:J,version:61},{schema:K,version:62},{schema:L,version:63},{schema:M,version:64},{schema:N,version:65},{upgrade:ia,version:66}];function Z(a){return Y.filter(function(b){var c=b.schema;b=b.version;return b<=a&&c!=null}).reduce(function(a,b){b=b.schema;return Object.assign(a,b)},{})}k=Z(Math.min(Y[Y.length-1].version,(j=d("MAWGating").getArmadilloDbVersion())!=null?j:Infinity));function $(a,b){var c=b.schema,d=b.upgrade;b=b.version;c!=null&&d!=null?a.version(b).stores(c).upgrade(d):c!=null?a.version(b).stores(c):d!=null?a.version(b).upgrade(d):a.version(b);return b}function e(c){return new(b("Promise"))(function(b){if(!a.indexedDB){b();return}var d=a.indexedDB.open(c);d.onsuccess=function(a){a=a.target.result;var c=a==null?void 0:a.version;a==null?void 0:a.close();c!=null?b(c/10):b()};d.onerror=function(){b()}})}function ja(a,b){a=Object.keys((a==null?void 0:a.schema)||{});b=Object.keys((b==null?void 0:b.schema)||{});a=[].concat(a,b);b=new Set(a);return b.size!==a.length}function f(a,b){var c=null,e=d("MAWGating").getArmadilloDbVersion();d("WALogger").DEV(i(),e);e==null&&d("WALogger").WARN(h());var f=Y.filter(function(a){a=a.version;return b==null||a>b}).filter(function(a){a=a.version;return e==null||e>=a}),g=Y.filter(function(a){a=a.version;return e==null||e>=a});if(f.length===0||f.length===g.length){var j;g=Y[Y.length-1].version;j=Math.min((j=e)!=null?j:g,g);a.version(j).stores(Z(j));return}if(d("MAWGating").shouldFlattenDbVersions()){g=f.reduce(function(a,b,c){if(c===0)return[babelHelpers["extends"]({},b,{schema:Z(b.version)})];c=a[a.length-1];if(b.upgrade!=null||ja(c,b)){a.push(b);return a}a.splice(a.length-1,1,babelHelpers["extends"]({},b,{schema:babelHelpers["extends"]({},c.schema,b.schema)}));return a},[]);g.forEach(function(b){c=Math.max((b=$(a,b))!=null?b:0,(b=c)!=null?b:0)})}else f.forEach(function(b,d){d=d===0?Z(b.version):b.schema;c=(b=$(a,babelHelpers["extends"]({},b,{schema:d})))!=null?b:c});return c}g.MAW_DB_VERSION_CHANGES=Y;g.CURRENT_MAW_STORES=k;g.getDexieDbVersion=e;g.updateDB=f}),98);
__d("MAWDexieError",[],(function(a,b,c,d,e,f){"use strict";a="ModifyError";b="BulkError";c="OpenFailedError";d="VersionChangeError";e="SchemaError";var g="UpgradeError",h="InvalidTableError",i="MissingAPIError",j="NoSuchDatabaseError",k="InvalidArgumentError",l="SubTransactionError",m="UnsupportedError",n="InternalError",o="DatabaseClosedError",p="PrematureCommitError",q="ForeignAwaitError",r="UnknownError",s="ConstraintError",t="DataError",u="TransactionInactiveError",v="ReadOnlyError",w="VersionError",x="NotFoundError",y="InvalidStateError",z="InvalidAccessError",A="AbortError",B="TimeoutError",C="QuotaExceededError",D="SyntaxError",E="DataCloneError";A={AbortError:A,BulkError:b,ConstraintError:s,DatabaseClosedError:o,DataCloneError:E,DataError:t,ForeignAwaitError:q,InternalError:n,InvalidAccessError:z,InvalidArgumentError:k,InvalidStateError:y,InvalidTableError:h,MissingAPIError:i,ModifyError:a,NoSuchDatabaseError:j,NotFoundError:x,OpenFailedError:c,PrematureCommitError:p,QuotaExceededError:C,ReadOnlyError:v,SchemaError:e,SubTransactionError:l,SyntaxError:D,TimeoutError:B,TransactionInactiveError:u,UnknownError:r,UnsupportedError:m,UpgradeError:g,VersionChangeError:d,VersionError:w};f.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQpl",["MAWQplProxy","qpl"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056836116,"905"));b=a;g["default"]=b}),98);
__d("MAWIDbSetupQplEventListener",["MAWDexieError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function j(a){var b=new Set(Object.keys(d("MAWDexieError").DEXIE_ERROR));b.has(a.reason)&&h!=null&&(h.endFail(a.reason),i!=null&&(i(),i=null))}b=function(b,c){h=b,i=c,a.addEventListener("unhandledrejection",j)};g.trackDbSetupFailure=b}),98);
__d("MAWDataSyncMiddlewareDeferred",["cr:3830"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3830")}),98);
__d("MAWIndexedDb",["CurrentUserInitialData","MAWBridge","MAWDataSyncMiddlewareDeferred","MAWDbMsg","MAWDbMutationMiddleware","MAWDbThread","MAWDbVersion","MAWDexieTable","MAWFolderTypes","MAWGating","MAWIDbSetupQpl","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWLocalizationType","MAWTimeUtils.bs","MAWTransactor","MAWWaitForBackendSetup","Promise","SignalDbTypes","WAJids","WALogger","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","dexie_alpha","err","promiseDone","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] afterTransactionForThreadEvent called outside of dexie transaction"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] called outside of dexie transaction"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB] actual version: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB] version is not set in QE"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[DB] maybe version: ",""]);m=function(){return a};return a}var n=null,o=null,p=["messages","unrenderedMessages","groupInfo","meta","identity","prekey","prekeyGeneration","session","signedPrekey","senderKeySessions","receipts","pendingReceipts","threads","contacts","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","retroactiveBackupsState"],q={appData:"++appDataId,&externalId",appMeta:"key",browserEncryptionMeta:"++id, &version",chunk:"++chunkId, &hashedPlaintextHash",contacts:"contactJid",existingUsers:"id",ftsBackloggedMessages:"rowId",ftsEncryptionMeta:"key",ftsIndexV3:"++ftsRowId,id,chatId,*prefixes",groupInfo:"groupJid,threadId",identity:"deviceJid",jobs:"++jobId,&uniqKey",media:"++mediaId, &hashedPlaintextHash, *msgIds",messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId",meta:"key",participants:"id,threadId,userJid",pendingReceipts:"id",pendingStanzas:"++rowId,externalIdWithType",personalSenderKeyStatuses:"groupJid",prekey:"keyId",prekeyGeneration:"generationId",reactions:"++rowId,reactionId,externalId,reactToMsgId,threadJid,reactToExternalId",receipts:"msgId",senderKeySessions:"id,groupJid,userJid",session:"id",signedPrekey:"keyId",tasks:"taskName",threads:"++chatId,&jid,threadOrder",unrenderedMessages:"++rowId,externalId,thread,msgId"},r={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs"},s={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId"},t={isDualSend:"++rowId"},u={historySyncQRCodeSecretKey:"key"},v={unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs"},w={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId,threadJid",unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs,threadJid"},x={groupInvites:"invitedParticipantId, inviterJid"},y={pendingStanzas:"++rowId,externalIdWithType, deleteTs"},z={media:"++mediaId, &hashedPlaintextHash, *msgIds, &objectId, &fbid"},A={dualSendMedia:"++id"},B={xma:"++xmaId, associatedMessageId, faviconMediaId, headerMediaId, targetExpiringAtSec, defaultPreviewMediaId"},C={historySyncQRCodeData:"rowId"},D={xma:"++xmaId, externalId, associatedMessageId, faviconMediaId, headerMediaId, targetExpiringAtSec, defaultPreviewMediaId"},E={dyiBatch:"++batchId"},F={groupInfo:"groupJid,threadId,correspondingOpenThreadKey"},G=null,H={groupInvites:G},I={dualSendMedia:"++id",dyiBatch:"++batchId",groupInfo:"groupJid,threadId,correspondingOpenThreadKey",groupInvites:G,historySyncQRCodeData:"rowId",media:"++mediaId, &hashedPlaintextHash, *msgIds, &objectId, &fbid",pendingStanzas:"++rowId,externalIdWithType, deleteTs",xma:"++xmaId, externalId, associatedMessageId, faviconMediaId, headerMediaId, targetExpiringAtSec, defaultPreviewMediaId"},J={groupInvites:"[invitedParticipantId+inviterJid], inviterJid"},K={messages:"++rowId,externalId,thread,msgId,altIndex,messageExpirationTs,messageDeleteTs,quoteExternalId,unsendMsgContentDeleteTs,revokedExternalId,threadJid,[thread+sortOrderMs]",unrenderedMessages:"++rowId,externalId,thread,msgId,messageDeleteForMeTs,threadJid,[thread+sortOrderMs]"},L={syncActions:"index,collection,actionState,indexMac,action,[modelId+modelType+actionState]"},M={missingKeys:"keyHex"},N={pendingMutations:"++id,action,index,collection"},O={collectionVersions:"++id,&collection"},P={syncKeys:"++id,&keyId,keyEpoch"},Q={collectionVersions:"++id,&collection",missingKeys:"keyHex",pendingMutations:"++id,action,index,collection",syncActions:"index,collection,actionState,indexMac,action,[modelId+modelType+actionState]",syncKeys:"++id,&keyId,keyEpoch"},R={identity:"deviceJid,userJid"},S={uploadRetryStatus:"[externalId+lastRetryTs], lastRetryTs, traceId"},T={stanzaQueue:"++stanzaQueueId,stanzaId,jid,type"},U={deviceChangeAlerts:"++deviceChangeAlertsId"},V={retroactiveBackupsState:"threadId"},aa={threads:"++chatId,&jid,threadOrder,deduplicationKey"},W={mediaBackup:"++mediaBackupId,&objectId,mediaId,msgId"};G=babelHelpers["extends"]({},q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,H,I,J,K,L,M,N,O,P,Q,R,S,U,W);var X=null;function ba(){var a=d("MAWGating").getArmadilloDbVersion();d("WALogger").DEV(m(),a);a==null&&d("WALogger").WARN(l());return function(b,c){if(a!=null&&a<c)return;X=X!=null&&X>c?X:c;return b.version(c)}}var Y=null;function a(a,e){var f,g,h,i,j;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:if(!(n!=null)){l.next=2;break}return l.abrupt("return");case 2:if(!(Y!=null)){l.next=4;break}return l.abrupt("return",Y);case 4:f=null;g=null;Y=new(b("Promise"))(function(a,b){f=a,g=b});h=function(){g==null?void 0:g(),Y=null};i=ba();d("MAWIDbSetupQplEventListener").trackDbSetupFailure(c("MAWIDbSetupQpl"),h);o=d("MAWIndexedDbMetadata").dbName(a);l.next=13;return b("regeneratorRuntime").awrap(d("MAWDbVersion").getDexieDbVersion(o));case 13:j=l.sent,n=new(d("MAWDexieTable").DexieTable)(o,function(a){c("MAWDataSyncMiddlewareDeferred")!=null&&a.use(c("MAWDataSyncMiddlewareDeferred").getDataSyncMiddleware());a.use(d("MAWDbMutationMiddleware").getMAWDbMutationMiddleware(e));if(d("MAWGating").shouldUseCondensedSchemas())X=d("MAWDbVersion").updateDB(a,j);else{a.version(21).stores(q);a.version(22).stores(r);a.version(23).stores(s);a.version(24).stores(t);a.version(25).stores(u);a.version(26).upgrade(function(a){var b=function(a){var b;b=(b=a.quote)==null?void 0:b.content;return a.quoteExternalId!=null&&(b==null?void 0:b.media)!=null};return a.messages.where("quoteExternalId").between(d("WAStanzaUtils").toStanzaId("0"),d("WAStanzaUtils").toStanzaId("["),!0,!0).filter(b).toArray()["catch"](function(){return a.messages.filter(b).toArray()}).then(function(b){var c=new Set(b.map(function(a){a=(a=a.quote)==null?void 0:a.content;return a==null?void 0:(a=a.media)==null?void 0:a.plaintextHash}).filter(Boolean)),d=b.map(function(a){a=a.msgId;return a});return a.media.filter(function(a){a=a.plaintextHash;return c.has(a)}).toArray().then(function(b){var c=new Map(b.map(function(a){var b=a.mediaId;a=a.plaintextHash;return[a,b]}));return a.messages.where("msgId").anyOf(d).modify(function(a){var b;b=(b=a.quote)==null?void 0:b.content;a.quote.content.mediaId=c.get(b.media.plaintextHash);delete a.quote.content.media})})})});a.version(27).upgrade(function(a){return a.groupInfo.toCollection().modify(function(a){typeof a.inviter==="number"&&delete a.inviter})});a.version(28).upgrade(function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.deviceId).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.deviceId)!=null&&typeof b.value.deviceId!=="number")return a.meta.clear()})});a.version(29).upgrade(function(a){return a.threads.filter(function(a){return d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return!1},user:function(){return a.oldestMsg!=null}})}).toArray().then(function(b){var c=[];b.forEach(function(a){c.push(a.oldestMsg),c.push(a.newestMsg)});return a.messages.where("msgId").anyOf(c.filter(Boolean)).toArray().then(function(c){var e=new Map(),f=[],g=[];c.forEach(function(a){e.set(a.msgId,a)});b.forEach(function(b){var c=e.get(b.oldestMsg),h=e.get(b.newestMsg);(c==null?void 0:c.type)==="Admin"&&(h==null?void 0:h.type)==="Admin"&&(c.msgId===h.msgId?g.push(b.chatId):f.push(b));return d("MAWDexieTable").dexieAll(f.map(function(b){return a.messages.where("thread").equals(b.chatId).toArray()})).then(function(b){b.forEach(function(a){if(a.length===0)return;var b=a[0].thread;a=a.filter(function(a){return a.type!=="Admin"});if(a.length>0)return;g.push(b)});return d("MAWDexieTable").dexieAll([a.threads.bulkDelete(g),a.messages.where("thread").anyOf(g)["delete"]()])})})})})});a.version(30).stores(v).upgrade(function(a){return a.unrenderedMessages.toCollection().modify(function(a){if(a.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var b=a.messageDeleteForMeTs;a.messageDeleteForMeTs=b}})});a.version(31).stores(w).upgrade(function(a){var b=0,e=0,f=c("dexie_alpha").currentTransaction;if(f==null)throw c("unrecoverableViolation")("transaction does not exist","messenger_e2ee_web");f.on("complete",function(){c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("DB upgrade to V31").then(function(){b>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}))});f.on("complete",function(){b>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})});return a.threads.toArray().then(function(c){var f=c.reduce(function(a,b){b!=null&&a.set(b.chatId,b);return a},new Map());return d("MAWDexieTable").dexieAll([a.messages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:(a.threadJid=null,b+=1)}else e+=1}),a.unrenderedMessages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:(a.threadJid=null,b+=1)}else e+=1})])})});if(d("MAWGating").shouldUseCoalescedSchemas()){var g;(g=i(a,41))==null?void 0:g.stores(I)}else{a.version(32).stores(x);a.version(33).stores(y);a.version(34).stores(z);a.version(35).stores(A);a.version(36).stores(B);a.version(37).stores(C);(g=i(a,38))==null?void 0:g.stores(D);(g=i(a,39))==null?void 0:g.stores(E);(g=i(a,40))==null?void 0:g.stores(F);(g=i(a,41))==null?void 0:g.stores(H)}(g=i(a,43))==null?void 0:g.stores(J).upgrade(function(a){return a.isDualSend.toCollection().modify(function(a){a.version==null&&(a.version=1)})});(g=i(a,44))==null?void 0:g.upgrade(function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(a.altIndex=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.thread))})});(g=i(a,45))==null?void 0:g.stores(K).upgrade(function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})});(g=i(a,46))==null?void 0:g.upgrade(function(a){return a.threads.toCollection().modify(function(a){a.folder==null&&(a.folder=d("MAWFolderTypes").FOLDER_ID.INBOX)})});(g=i(a,47))==null?void 0:g.upgrade(function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})});if(d("MAWGating").shouldUseCoalescedSchemas()){(g=i(a,53))==null?void 0:g.stores(Q).upgrade(function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})})}else{(g=i(a,48))==null?void 0:g.stores(L);(g=i(a,49))==null?void 0:g.stores(M);(g=i(a,50))==null?void 0:g.stores(N);(g=i(a,51))==null?void 0:g.stores(O);(g=i(a,52))==null?void 0:g.stores(P);(g=i(a,53))==null?void 0:g.upgrade(function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})})}(g=i(a,54))==null?void 0:g.upgrade(function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&a.sortOrderMs!=null&&a.sortOrderMs>0&&(a.sortOrderMs=0)})});(g=i(a,55))==null?void 0:g.upgrade(function(a){return a.messages.toCollection().modify(function(a){!(a.type===d("WAMsgType").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&a.sortOrderMs!=null&&a.sortOrderMs<1661204086&&(a.sortOrderMs=d("MAWDbMsg").getCanonicalTsFromMsg(a)*1e3)})});(g=i(a,56))==null?void 0:g.upgrade(function(a){return a.threads.filter(function(a){return a.isMigratedLocally===!0&&a.newestMsg!=null}).toArray().then(function(b){var c=b.map(function(a){return a.chatId}),e=new Map();return d("MAWDexieTable").dexieAll(b.map(function(b){return a.messages.where(["thread","sortOrderMs"]).between([b.chatId,0],[b.chatId,Number.MAX_VALUE]).last().then(function(a){a!=null&&e.set(a.thread,a.msgId)})})).then(function(){return a.threads.where("chatId").anyOf(c).modify(function(a){var b=e.get(a.chatId);b!=null&&(a.newestMsg=b)})})})});(g=i(a,57))==null?void 0:g.stores(R).upgrade(function(a){return a.identity.toCollection().modify(function(a){a.userJid=d("WAJids").extractUserJid(a.deviceJid)})});(g=i(a,58))==null?void 0:g.upgrade(function(a){return a.threads.toCollection().modify(function(a){a.lastReadMsgTs!=null&&a.lastReadMsgTs<d("WATimeUtils").MAX_INT&&(a.lastReadMsgTs=d("MAWTimeUtils.bs").getMillisTime(a.lastReadMsgTs));if(a.newestMsgTs!=null&&a.newestMsgTs<d("WATimeUtils").MAX_INT){var b=d("MAWTimeUtils.bs").getMillisTime(a.newestMsgTs);a.newestMsgTs=b;b!=null&&(a.threadOrder=d("MAWDbThread").craftThreadOrder(b,a.jid))}})});(g=i(a,59))==null?void 0:g.stores(S);(g=i(a,60))==null?void 0:g.upgrade(function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(a.altIndex=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(a.thread))})});(g=i(a,61))==null?void 0:g.stores(T);(g=i(a,62))==null?void 0:g.stores(U);(g=i(a,63))==null?void 0:g.stores(V);(g=i(a,64))==null?void 0:g.stores(aa);(g=i(a,65))==null?void 0:g.stores(W);(g=i(a,66))==null?void 0:g.upgrade(function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.fbid).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.fbid)!=null&&b.value.fbid==="0")return a.meta.clear()})})}d("WALogger").DEV(k(),X);c("MAWIDbSetupQpl").addPoint("database_version_upgraded ",{"int":{dbVersion:X}});a.on("ready",function(e){f==null?void 0:f();Y=null;if(e==null){d("WALogger").ERROR(["DB is null"]);return}return b("Promise").all(c("CurrentUserInitialData").IS_EMPLOYEE?e.tables.map(function(b){return a[b.name].count().then(function(a){return[b.name,a]})}):[]).then(function(a){a=a.reduce(function(a,b){var c=b[0];b=b[1];return babelHelpers["extends"]({},a,(a={},a[c+"_rows"]=b,a))},{});c("MAWIDbSetupQpl").endSuccess({"int":babelHelpers["extends"]({dbVersion:X},a)})})});a.on("versionchange",function(){var a=X!=null?X-1:0;c("MAWIDbSetupQpl").addPoint("database_version_upgraded ",{"int":{prev_db_version:a}});globalThis.location.reload==null?void 0:globalThis.location.reload()})});case 15:case"end":return l.stop()}},null,this)}var Z=!1;function e(a){if(n!=null)return b("Promise").resolve(n);if(Y==null){var e;e='IndexDB has not started initialization before executing "'+((e=a)!=null?e:"unnamed")+'"';Z||(Z=!0,d("WALogger").ERROR(j(),e));return b("Promise").reject(c("err")(e))}return Y.then(function(){if(n==null){var b;throw c("err")('IndexDB has not been initialized before executing "'+((b=a)!=null?b:"unnamed")+'"')}return n})}function f(a){n=a}var $=new WeakMap();function ca(a){var b,e=c("dexie_alpha").currentTransaction;if(e==null){d("WALogger").ERROR(i());throw c("unrecoverableViolation")("afterTransaction called outside of dexie transaction","messenger_e2ee_web")}if(typeof a.value==="object"&&(a==null?void 0:(b=a.value)==null?void 0:b.isDualSend)===!0)return;b=$.get(e);if(b!=null)b.push(a);else{var f=[a];$.set(e,f);e.on("complete",function(){$["delete"](e),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:f})})}}function da(a,b){var e=c("dexie_alpha").currentTransaction;if(e==null){d("WALogger").ERROR(h());throw c("unrecoverableViolation")("afterTransactionForThreadEvent called outside of dexie transaction","messenger_e2ee_web")}e.on("complete",function(){d("MAWBridge").getBridge().fireAndForget("threadEvent",b,a)})}function ea(a){n!=null&&(n.close(),n=null);var b=o;b===null&&a!=null&&(b=d("MAWIndexedDbMetadata").dbName(a));d("MAWIndexedDBDeletion").deleteDB(b)}g.makeMsgrTransactor=d("MAWTransactor").makeMsgrTransactor;g.TABLES_TO_ENCRYPT=p;g.CURRENT_MAW_STORES_FOR_TESTS=G;g.makeDB=a;g.getDB=e;g.setDB_INTERNAL_USE_ONLY=f;g.afterTransaction=ca;g.afterTransactionThreadEvent=da;g.deleteDb=ea}),98);
__d("MAWDexieCastToPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(a)}function c(a){return a}f.dexieCastToPromise=a;f.promiseCastToDexiePromise=c}),66);
__d("MAWLLAMigrationUtils",["gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=1/10,i=new Map([["setClockSkew",1/100],["getRoutingInfo",1/50],["unknown",1/100]]);function a(a,b,d,e){b===void 0&&(b=!1);d===void 0&&(d={});e===void 0&&(e=!1);var f=i.get(a)||h;return c("gkx")("3110")&&Math.random()<f?[e?c("qpl")._(521475322,"1350"):c("qpl")._(1056839327,"560"),babelHelpers["extends"]({bool:{newLLA:b},string:{transactor:a}},d)]:[]}g.getTransactorQPLParam=a}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){a=function(){function a(a){a===void 0&&(a=-1),this.$1=b("Promise").resolve(),this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=g(b,this.$2);return c};c.enqueue=function(a){a=this.$1.then(a);var b=a.then();this.$1=g(a,this.$2);return b};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||b("Promise").resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=g(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function g(a,c){if(c>=0)return new(b("Promise"))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(h,h)}function h(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("MAWTransactor",["MAWDexieCastToPromise","MAWDexieTable","MAWErrorObject","MAWIndexedDb","MAWLLAMigrationUtils","MAWQplProxy","MAWTransactionMode","Promise","WALogger","WAPromiseQueue","dexie_alpha","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Uncaught exception un runInBulkTransactor: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Running in bulk transaction"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Several transactions are trying to be executed at the same time: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] runInBulkTransaction cannot be called within another transaction"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Finished bulk transaction"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Error completing bulk operation ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] Bulking "," db operations together"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MWPTransactor] BulkTransactor cannot be called without a transaction id"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["makeMsgrTransactor cannot be called within another transaction"]);p=function(){return a};return a}var q=1,r=new(d("WAPromiseQueue").PromiseQueue)(),s=new Map(),t=function(){};function u(a,b,e){b==null?void 0:b.addPoint("transaction_opened");d("MAWDexieTable").setDexiePSDItem("transactorQPLEvent",b);for(var f=arguments.length,g=new Array(f>3?f-3:0),h=3;h<f;h++)g[h-3]=arguments[h];return e.apply(void 0,[a].concat(g)).then(function(a){b==null?void 0:b.endSuccess();return a})["catch"](function(a){b==null?void 0:b.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);d("WALogger").ERROR(["Error performing transaction"],a);throw c("unrecoverableViolation")("Error performing transaction","messenger_e2ee_web",a?{error:a}:{})})}function v(a,b,e,f){e!=null&&c("dexie_alpha").currentTransaction!=null&&e.endFail("invoked_in_nested_transaction");if(c("dexie_alpha").currentTransaction!=null){d("WALogger").ERROR(p());throw c("unrecoverableViolation")("makeMsgrTransactor cannot be called within another transaction","messenger_e2ee_web")}return d("MAWIndexedDb").getDB().then(function(c){return c.transact(a,b,f)})}function w(a,e,f,g){f=d("MAWDexieTable").getDexiePSDItem("transactionId");if(f==null){d("WALogger").ERROR(o());throw c("unrecoverableViolation")("BulkTransactor cannot be called without a transaction id","messenger_e2ee_web")}var h=s.get(f)||[],i=t,j=t,k=new(b("Promise"))(function(a,b){i=a,j=b});h.push({fn:g,mode:a,promise:k,reject:j,resolve:i,stores:e});s.set(f,h);return k}function x(a,b,c,e){var f=d("MAWDexieTable").getDexiePSDItem("transactor");return f==="bulk"?w(a,b,c,e):v(a,b,c,e)}function y(a){var b=[].concat(s.get(a)||[]);s["delete"](a);if(b.length===0)return d("MAWDexieTable").dexieResolve();d("WALogger").LOG(n(),b.length);var c=b.some(function(a){a=a.mode;return a===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY,e=Array.from(new Set(b.flatMap(function(a){a=a.stores;return a})));return d("MAWDexieCastToPromise").promiseCastToDexiePromise(d("MAWIndexedDb").getDB()).then(function(a){return d("MAWDexieCastToPromise").promiseCastToDexiePromise(a.transact(c,e,function(){return b.reduce(function(a,b){var c=b.fn,e=b.reject;b=b.resolve;return a.then(function(){return c()}).then(b)["catch"](function(a){d("WALogger").ERROR(m(),a),e(a)})},d("MAWDexieTable").dexieResolve())}).then(function(){d("MAWDexieTable").clearDexiePSDItem("transactionId"),d("WALogger").LOG(l())}))})}function a(a){return r.enqueue(function(){if(c("dexie_alpha").currentTransaction!=null){d("WALogger").ERROR(k());throw c("unrecoverableViolation")("runInBulkTransaction cannot be called within another transaction","messenger_e2ee_web")}if(d("MAWDexieTable").getDexiePSDItem("transactionId")!=null){d("WALogger").ERROR(j(),d("MAWDexieTable").getDexiePSDItem("transactionId"));throw c("unrecoverableViolation")("runInBulkTransaction cannot schedule several transactions simultaneously","messenger_e2ee_web")}d("WALogger").LOG(i());return d("MAWDexieCastToPromise").dexieCastToPromise(d("MAWDexieTable").dexieResolve().then(function(){var b=q++;d("MAWDexieTable").setDexiePSDItem("transactor","bulk");d("MAWDexieTable").setDexiePSDItem("transactionId",b);var c=a();d("MAWDexieTable").clearDexiePSDItem("transactor");return y(b).then(function(){return d("MAWDexieCastToPromise").promiseCastToDexiePromise(c)})["finally"](function(){d("MAWDexieTable").clearDexiePSDItem("transactionId")})}))})["catch"](function(a){d("WALogger").ERROR(h(),a);throw c("unrecoverableViolation")("Uncaught exception un runInBulkTransactor:","messenger_e2ee_web",a instanceof Error?{error:a}:{error:void 0})})}function z(){var a=d("MAWLLAMigrationUtils").getTransactorQPLParam("unknown");a=a.length===2?a:[null,null];var b=a[0];a=a[1];return b!=null?d("MAWQplProxy").startQplUserFlow(b,a!=null?a:void 0):null}function e(a,b,c){var e=Object.keys(a),f=e.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(a){return function(){var g;for(var h=arguments.length,i=new Array(h),j=0;j<h;j++)i[j]=arguments[j];var k=b!=null?d("MAWQplProxy").startQplUserFlow(b,c!=null?c:void 0):z(),l=c==null?void 0:(g=c.string)==null?void 0:g.transactor;return d("MAWIndexedDb").getDB(l).then(function(b){return x(f,e,k,function(){return u.apply(void 0,[b.stores,k,a].concat(i))})})}}}g.runInBulkTransaction=a;g.makeMsgrTransactor=e}),98);
__d("isObject",[],(function(a,b,c,d,e,f){function a(a){var b=typeof a;return b==="function"||b==="object"&&!!a}f["default"]=a}),66);
__d("isPlainObject",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.prototype.toString.call(a)==="[object Object]"}f["default"]=a}),66);
__d("MAWVaultDb",["MAWGating","MAWQplProxy","MAWVault","err","isObject","isPlainObject","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=1/1e3,i=new WeakMap();function j(a,b){return b[a]!=null}function a(a,b,e){if(!c("isPlainObject")(a)||!d("MAWGating").isVaultingEnabled()||!j(b,e)||a==null)return a;var f=i.get(a);if(f!==void 0)return f;f=Math.random()<h?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25301509,"119")):null;try{var g=babelHelpers["extends"]({},a);e=e[b];k(g,e,!0);f==null?void 0:f.endSuccess();i.set(a,g);return g}catch(a){f==null?void 0:f.endFail("vault_fail");throw c("err")(a.message+" - Failed to vault an entity in the table: "+b)}}function b(a,b,e){if(!c("isPlainObject")(a)||!d("MAWGating").isVaultingEnabled()||!j(b,e)||a==null)return a;var f=Math.random()<h?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25313217,"120")):null;try{a=babelHelpers["extends"]({},a);e=e[b];k(a,e,!1);f==null?void 0:f.endSuccess();return a}catch(a){f==null?void 0:f.endFail("unvault_fail");throw c("err")(a.message+" - Unvaulting failed for an entity in the table: "+b)}}function k(a,b,e){if(a==null||b==null)return!1;if(!c("isObject")(a)&&!c("isObject")(b)&&a!=null&&b===!0)return!0;for(var f in a)if(a[f]!=null&&b[f]!=null&&k(a[f],b[f],e)){var g=a[f];e?a[f]=d("MAWVault").vault(g):d("MAWVault").isVaulted(g)&&(a[f]=d("MAWVault").unvault(g))}return!1}g.vaultDbRow=a;g.unvaultDbRow=b;g.maybeVaultOrUnvaultColumns=k}),98);
__d("MAWVaultDefinitions",[],(function(a,b,c,d,e,f){"use strict";a={messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}};b={messages:{text:!0,replyMessageText:!0},threads:{snippet:!0}};f.ARMADILLO_IDB_VAULT_DEFINITIONS=a;f.PERSISTED_DB_VAULT_DEFINITIONS=b}),66);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWGating","MAWVaultDb","MAWVaultDefinitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(!d("MAWGating").isVaultingEnabled()&&!d("MAWGating").isEncryptionAtRestEnabled())return a;a=babelHelpers["extends"]({},a);a=d("MAWVaultDb").unvaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS);a=d("MAWDbObjEncryption").encryptDbObj(a,b,c);return a}function b(a,b,c){a=babelHelpers["extends"]({},a);a=d("MAWDbObjEncryption").decryptDbObj(a,b,c);if(!d("MAWGating").isVaultingEnabled())return a;a=d("MAWVaultDb").vaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS);return a}g.mutateValue=a;g.getValue=b}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations"],(function(a,b,c,d,e,f,g){function a(a){return{stack:"dbcore",name:"MAWDbMutationMiddleware",create:function(b){return babelHelpers["extends"]({},b,{table:function(e){var f=b.table(e);try{return babelHelpers["extends"]({},f,{mutate:function(b){var c=null;switch(b.type){case"add":case"put":c=b.values.map(function(b){return d("MAWDbMiddlewareMutations").mutateValue(b,e,a)});break;case"delete":break;case"deleteRange":break}if(b.type==="delete"||b.type==="deleteRange"||c==null)return f.mutate(b);b.values=c;return f.mutate(b).then(function(a){return a})},get:function(b){return f.get(b).then(function(b){return b===void 0?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})},getMany:function(b){return f.getMany(b).then(function(b){return b.map(function(b){return b===void 0?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})})},query:function(b){return f.query(b).then(function(b){if(b.result.length===0||typeof b.result[0]!=="object")return b;var c=b.result.map(function(b){return d("MAWDbMiddlewareMutations").getValue(b,e,a)});b.result=c;return b})},openCursor:function(b){return f.openCursor(b).then(function(b){return b==null||b.value==null?b:h(b,e,a)})}})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("Error applying MAWDbMiddleware");return f}}})}}}function h(a,b,c){var e;return Object.create(a,{key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},"continue":{get:function(){return a["continue"]}},start:{value:function(f){return a.start(function(){e=d("MAWDbMiddlewareMutations").getValue(a.value,b,c),a.value=e,f()})}},value:{get:function(){return e}}})}g.getMAWDbMutationMiddleware=a}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null),i=babelHelpers["extends"]({},null),j=babelHelpers["extends"]({},null),k=babelHelpers["extends"]({},null),l=babelHelpers["extends"]({},null),m=babelHelpers["extends"]({},null),n=babelHelpers["extends"]({},null),o=babelHelpers["extends"]({},null),p=babelHelpers["extends"]({},null),q=babelHelpers["extends"]({},null),r=babelHelpers["extends"]({},null),s=babelHelpers["extends"]({},null);a.internalSpec={externalId:[1,d("WAProtoConst").TYPES.STRING],author:[2,d("WAProtoConst").TYPES.STRING],chat:[3,d("WAProtoConst").TYPES.STRING]};b.internalSpec={fromMe:[1,d("WAProtoConst").TYPES.BOOL],id:[2,d("WAProtoConst").TYPES.STRING]};c.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,b],ts:[2,d("WAProtoConst").TYPES.INT64]};e.internalSpec={lastMessageTimestamp:[1,d("WAProtoConst").TYPES.INT64],lastSystemMessageTimestamp:[2,d("WAProtoConst").TYPES.INT64],messages:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,c]};f.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],chatJid:[2,d("WAProtoConst").TYPES.STRING],archived:[3,d("WAProtoConst").TYPES.BOOL],ts:[4,d("WAProtoConst").TYPES.INT64],messageRange:[5,d("WAProtoConst").TYPES.MESSAGE,e],read:[6,d("WAProtoConst").TYPES.BOOL]};h.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],protocolMsgId:[2,d("WAProtoConst").TYPES.MESSAGE,a]};i.internalSpec={chatAction:[1,d("WAProtoConst").TYPES.MESSAGE,f],messageAction:[2,d("WAProtoConst").TYPES.MESSAGE,h],__oneofs__:{action:["chatAction","messageAction"]}};j.internalSpec={actions:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,i]};k.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT64],anonId:[2,d("WAProtoConst").TYPES.BYTES],rootKey:[3,d("WAProtoConst").TYPES.BYTES],status:[4,d("WAProtoConst").TYPES.INT32]};l.internalSpec={backupId:[1,d("WAProtoConst").TYPES.UINT64],serverDataId:[2,d("WAProtoConst").TYPES.UINT64],epoch:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,k],tempOcmfClientState:[4,d("WAProtoConst").TYPES.BYTES],mailboxRootKey:[5,d("WAProtoConst").TYPES.BYTES],obliviousValidationToken:[6,d("WAProtoConst").TYPES.BYTES]};m.internalSpec={currentIndex:[1,d("WAProtoConst").TYPES.UINT32],deviceIndexes:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.UINT32],rawId:[3,d("WAProtoConst").TYPES.UINT32]};n.internalSpec={keyId:[1,d("WAProtoConst").TYPES.BYTES],keyData:[2,d("WAProtoConst").TYPES.BYTES],keyEpoch:[3,d("WAProtoConst").TYPES.UINT32],timestamp:[4,d("WAProtoConst").TYPES.INT64],fingerprint:[5,d("WAProtoConst").TYPES.MESSAGE,m]};o.internalSpec={keys:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,n],orphanKeys:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.BYTES]};p.internalSpec={keyIds:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.BYTES]};q.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],actions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,i],encryptedBackupsSecrets:[3,d("WAProtoConst").TYPES.MESSAGE,l],syncKeyShare:[4,d("WAProtoConst").TYPES.MESSAGE,o],syncKeyRequest:[5,d("WAProtoConst").TYPES.MESSAGE,p]};r.internalSpec={deviceJid:[1,d("WAProtoConst").TYPES.STRING],serializedPubKey:[2,d("WAProtoConst").TYPES.BYTES],baseKey:[3,d("WAProtoConst").TYPES.BYTES]};s.internalSpec={externalId:[1,d("WAProtoConst").TYPES.STRING],ts:[2,d("WAProtoConst").TYPES.INT64],contents:[3,d("WAProtoConst").TYPES.MESSAGE,q],permittedIdentitiesPerDevice:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,r],ack:[5,d("WAProtoConst").TYPES.INT32],appDataId:[6,d("WAProtoConst").TYPES.INT32],recipientDevices:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING],sendPartial:[8,d("WAProtoConst").TYPES.BOOL]};g.ProtocolMsgIdSpec=a;g.MetaSyncMessageKeyProtoSpec=b;g.MetaSyncMessageProtoSpec=c;g.MetaSyncMessageRangeProtoSpec=e;g.MetaSyncChatActionProtoSpec=f;g.MetaSyncMessageActionProtoSpec=h;g.MetaSyncActionProtoSpec=i;g.MetaSyncAppDataProtoSpec=j;g.EncryptedBackupsSecretsEpochProtoSpec=k;g.EncryptedBackupsSecretsProtoSpec=l;g.FingerprintProtoSpec=m;g.SyncKeyDataProtoSpec=n;g.SyncKeyShareProtoSpec=o;g.SyncKeyRequestProtoSpec=p;g.AppDataProtoSpec=q;g.IdentitiesPerDeviceProtoSpec=r;g.AppDataTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);a.internalSpec={msgTypeVersion:[1,d("WAProtoConst").TYPES.INT32],hmacKey:[2,d("WAProtoConst").TYPES.BYTES],allowSecurityAlert:[3,d("WAProtoConst").TYPES.BOOL],hotlikeSticker:[4,d("WAProtoConst").TYPES.BYTES],isBackfilledForOccamadillo:[5,d("WAProtoConst").TYPES.BOOL],allowSecurityAlertForSelf:[11,d("WAProtoConst").TYPES.BOOL]};b.internalSpec={key:[1,d("WAProtoConst").TYPES.STRING],value:[2,d("WAProtoConst").TYPES.MESSAGE,a]};g.DbAppMetaValuesProtoSpec=a;g.AppMetaTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={collection:[1,d("WAProtoConst").TYPES.STRING],version:[2,d("WAProtoConst").TYPES.INT32],state:[3,d("WAProtoConst").TYPES.STRING],finiteFailureStartTime:[4,d("WAProtoConst").TYPES.INT64],ltHash:[5,d("WAProtoConst").TYPES.BYTES],isCollectionInMacMismatchFatal:[6,d("WAProtoConst").TYPES.BOOL]};g.CollectionVersionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);a.internalSpec={ephemeralExpirationInSec:[1,d("WAProtoConst").TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,d("WAProtoConst").TYPES.INT64]};b.internalSpec={syncResponseRetries:[1,d("WAProtoConst").TYPES.INT32],syncResponseSentTs:[2,d("WAProtoConst").TYPES.INT64]};c.internalSpec={sequence:[1,d("WAProtoConst").TYPES.INT64],timestamp:[2,d("WAProtoConst").TYPES.INT64],devices:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.BYTES],signingDeviceIndex:[4,d("WAProtoConst").TYPES.INT64],dirty:[5,d("WAProtoConst").TYPES.BOOL]};e.internalSpec={timeBucket:[1,d("WAProtoConst").TYPES.INT64],alert:[2,d("WAProtoConst").TYPES.BOOL]};f.internalSpec={contactJid:[1,d("WAProtoConst").TYPES.STRING],devices:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING],dhash:[3,d("WAProtoConst").TYPES.STRING],nameForSearch:[4,d("WAProtoConst").TYPES.STRING],ephemeralSetting:[5,d("WAProtoConst").TYPES.MESSAGE,a],isBlocked:[6,d("WAProtoConst").TYPES.BOOL],lastSyncTs:[7,d("WAProtoConst").TYPES.INT64],icdcInfo:[8,d("WAProtoConst").TYPES.MESSAGE,c],ephemeralSyncResponseBackoffInfo:[9,d("WAProtoConst").TYPES.MESSAGE,b],icdcFails:[10,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,e],relationship:[11,d("WAProtoConst").TYPES.INT32],isRestricted:[12,d("WAProtoConst").TYPES.BOOL]};g.EphemeralSettingProtoSpec=a;g.EphemeralSyncResponseBackoffInfoSpec=b;g.ICDCInfoProtoSpec=c;g.ICDCCheckFailSpec=e;g.ContactsTableSchemaProtoSpec=f}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={action:[1,d("WAProtoConst").TYPES.STRING],isArchived:[2,d("WAProtoConst").TYPES.BOOL],deviceChangeAlertsId:[3,d("WAProtoConst").TYPES.INT64],location:[4,d("WAProtoConst").TYPES.STRING],model:[5,d("WAProtoConst").TYPES.STRING],ts:[6,d("WAProtoConst").TYPES.INT64],loggedOut:[7,d("WAProtoConst").TYPES.BOOL],deviceJid:[8,d("WAProtoConst").TYPES.STRING],identity:[9,d("WAProtoConst").TYPES.BYTES],platform:[10,d("WAProtoConst").TYPES.STRING]};g.DeviceChangeAlertsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={batchId:[1,d("WAProtoConst").TYPES.INT32],numMessages:[2,d("WAProtoConst").TYPES.INT32],oldestTs:[3,d("WAProtoConst").TYPES.INT64],threadId:[4,d("WAProtoConst").TYPES.STRING],isThread:[5,d("WAProtoConst").TYPES.BOOL]};g.DyiBatchTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={groupJid:[1,d("WAProtoConst").TYPES.STRING],threadId:[2,d("WAProtoConst").TYPES.INT32],creator:[3,d("WAProtoConst").TYPES.STRING],creationTs:[4,d("WAProtoConst").TYPES.INT64],name:[5,d("WAProtoConst").TYPES.STRING],nameOwner:[6,d("WAProtoConst").TYPES.STRING],nameTs:[7,d("WAProtoConst").TYPES.INT64],msgExpiration:[8,d("WAProtoConst").TYPES.INT32],participantVersion:[9,d("WAProtoConst").TYPES.STRING],inviter:[10,d("WAProtoConst").TYPES.STRING]};g.GroupInfoSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={inviterJid:[1,d("WAProtoConst").TYPES.STRING],invitedParticipantId:[2,d("WAProtoConst").TYPES.STRING],inviteCode:[3,d("WAProtoConst").TYPES.STRING],inviteExpirationTs:[4,d("WAProtoConst").TYPES.INT64],caption:[5,d("WAProtoConst").TYPES.STRING]};g.GroupInvitesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null),i=babelHelpers["extends"]({},null);a.internalSpec={plaintextHash:[1,d("WAProtoConst").TYPES.STRING],blobData:[2,d("WAProtoConst").TYPES.BYTES],mimetype:[3,d("WAProtoConst").TYPES.STRING],hashedPlaintextHash:[4,d("WAProtoConst").TYPES.STRING],chunkId:[5,d("WAProtoConst").TYPES.INT32]};b.internalSpec={mediaBackupId:[1,d("WAProtoConst").TYPES.INT32],mediaId:[2,d("WAProtoConst").TYPES.INT32],objectId:[3,d("WAProtoConst").TYPES.STRING],msgId:[4,d("WAProtoConst").TYPES.STRING],fbid:[5,d("WAProtoConst").TYPES.STRING]};c.internalSpec={msgId:[1,d("WAProtoConst").TYPES.STRING],mediaEntryData:[2,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={duration:[1,d("WAProtoConst").TYPES.INT32],width:[2,d("WAProtoConst").TYPES.INT32],height:[3,d("WAProtoConst").TYPES.INT32],mimetype:[4,d("WAProtoConst").TYPES.STRING],jpegThumbnail:[5,d("WAProtoConst").TYPES.BYTES],jpegThumbnailHeight:[6,d("WAProtoConst").TYPES.INT32],jpegThumbnailWidth:[7,d("WAProtoConst").TYPES.INT32]};f.internalSpec={width:[1,d("WAProtoConst").TYPES.UINT32],height:[2,d("WAProtoConst").TYPES.UINT32],jpegThumbnail:[3,d("WAProtoConst").TYPES.BYTES],jpegThumbnailHeight:[4,d("WAProtoConst").TYPES.INT32],jpegThumbnailWidth:[5,d("WAProtoConst").TYPES.INT32]};h.internalSpec={duration:[1,d("WAProtoConst").TYPES.INT32],mimetype:[2,d("WAProtoConst").TYPES.STRING],played:[3,d("WAProtoConst").TYPES.BOOL]};i.internalSpec={mediaType:[1,d("WAProtoConst").TYPES.STRING],plaintextHash:[2,d("WAProtoConst").TYPES.STRING],size:[3,d("WAProtoConst").TYPES.INT32],mediaEntries:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,c],ts:[5,d("WAProtoConst").TYPES.INT64],validatedVideoInfo:[6,d("WAProtoConst").TYPES.MESSAGE,e],validatedImageInfo:[7,d("WAProtoConst").TYPES.MESSAGE,f],validatedAudioInfo:[8,d("WAProtoConst").TYPES.MESSAGE,h],hashedPlaintextHash:[9,d("WAProtoConst").TYPES.STRING],mediaId:[10,d("WAProtoConst").TYPES.INT32],msgIds:[11,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING],objectId:[12,d("WAProtoConst").TYPES.STRING],fbid:[13,d("WAProtoConst").TYPES.STRING]};g.ChunkTableSchemaProtoSpec=a;g.MediaBackupSchemaProtoSpec=b;g.MediaEntriesProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=h;g.MediaTableSchemaProtoSpec=i}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null),i=babelHelpers["extends"]({},null),j=babelHelpers["extends"]({},null),k=babelHelpers["extends"]({},null);a.internalSpec={content:[1,d("WAProtoConst").TYPES.STRING],adminMsgContent:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING],adminType:[3,d("WAProtoConst").TYPES.STRING],obsoleteExpiration:[4,d("WAProtoConst").TYPES.INT32],obsoleteTs:[5,d("WAProtoConst").TYPES.INT64],subtype:[6,d("WAProtoConst").TYPES.STRING],protobuf:[7,d("WAProtoConst").TYPES.BYTES],screenshotActionType:[8,d("WAProtoConst").TYPES.INT32],authorName:[9,d("WAProtoConst").TYPES.STRING],version:[10,d("WAProtoConst").TYPES.INT32],mentionedJids:[11,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING]};b.internalSpec={frankingTag:[1,d("WAProtoConst").TYPES.BYTES],frankingVersion:[2,d("WAProtoConst").TYPES.INT32],reportingContent:[3,d("WAProtoConst").TYPES.BYTES],reportingTag:[4,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={remoteJid:[1,d("WAProtoConst").TYPES.STRING],content:[2,d("WAProtoConst").TYPES.MESSAGE,j]};e.internalSpec={duration:[1,d("WAProtoConst").TYPES.INT32],width:[2,d("WAProtoConst").TYPES.INT32],height:[3,d("WAProtoConst").TYPES.INT32],mimetype:[4,d("WAProtoConst").TYPES.STRING],jpegThumbnail:[5,d("WAProtoConst").TYPES.BYTES],jpegThumbnailHeight:[6,d("WAProtoConst").TYPES.INT32],jpegThumbnailWidth:[7,d("WAProtoConst").TYPES.INT32]};f.internalSpec={width:[1,d("WAProtoConst").TYPES.UINT32],height:[2,d("WAProtoConst").TYPES.UINT32],jpegThumbnail:[3,d("WAProtoConst").TYPES.BYTES],jpegThumbnailHeight:[4,d("WAProtoConst").TYPES.INT32],jpegThumbnailWidth:[5,d("WAProtoConst").TYPES.INT32]};h.internalSpec={duration:[1,d("WAProtoConst").TYPES.INT32],mimetype:[2,d("WAProtoConst").TYPES.STRING],played:[3,d("WAProtoConst").TYPES.BOOL]};i.internalSpec={mediaType:[1,d("WAProtoConst").TYPES.STRING],plaintextHash:[2,d("WAProtoConst").TYPES.STRING],size:[3,d("WAProtoConst").TYPES.INT32],ts:[4,d("WAProtoConst").TYPES.INT64],mediaEntry:[5,d("WAProtoConst").TYPES.BYTES],validatedVideoInfo:[6,d("WAProtoConst").TYPES.MESSAGE,e],validatedImageInfo:[7,d("WAProtoConst").TYPES.MESSAGE,f],validatedAudioInfo:[8,d("WAProtoConst").TYPES.MESSAGE,h]};j.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],ts:[2,d("WAProtoConst").TYPES.INT64],externalId:[3,d("WAProtoConst").TYPES.STRING],author:[4,d("WAProtoConst").TYPES.STRING],msgContent:[5,d("WAProtoConst").TYPES.MESSAGE,a],obsoleteMedia:[6,d("WAProtoConst").TYPES.MESSAGE,i],msgId:[7,d("WAProtoConst").TYPES.STRING],mediaId:[8,d("WAProtoConst").TYPES.INT32],sourceId:[9,d("WAProtoConst").TYPES.STRING],xmaMessageType:[10,d("WAProtoConst").TYPES.INT32],specialTextSize:[11,d("WAProtoConst").TYPES.INT32]};k.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],ts:[2,d("WAProtoConst").TYPES.INT64],externalId:[3,d("WAProtoConst").TYPES.STRING],msgId:[4,d("WAProtoConst").TYPES.STRING],author:[5,d("WAProtoConst").TYPES.STRING],ack:[6,d("WAProtoConst").TYPES.INT32],resendCount:[7,d("WAProtoConst").TYPES.INT32],msgContent:[8,d("WAProtoConst").TYPES.MESSAGE,a],altIndex:[9,d("WAProtoConst").TYPES.STRING],forwardingScore:[10,d("WAProtoConst").TYPES.INT32],quote:[11,d("WAProtoConst").TYPES.MESSAGE,c],messageExpirationTs:[12,d("WAProtoConst").TYPES.INT64],ephemeralSetting:[13,d("WAProtoConst").TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,d("WAProtoConst").TYPES.STRING],isForwarded:[15,d("WAProtoConst").TYPES.BOOL],serverTs:[16,d("WAProtoConst").TYPES.INT64],originalTs:[17,d("WAProtoConst").TYPES.INT64],sortOrderMs:[18,d("WAProtoConst").TYPES.INT64],reportingMeta:[19,d("WAProtoConst").TYPES.MESSAGE,b],messageDeleteTs:[20,d("WAProtoConst").TYPES.INT64],ephemeralCounterStarted:[21,d("WAProtoConst").TYPES.BOOL],quoteExternalId:[22,d("WAProtoConst").TYPES.STRING],unsendMsgContentDeleteTs:[23,d("WAProtoConst").TYPES.INT64],rowId:[24,d("WAProtoConst").TYPES.INT32],thread:[25,d("WAProtoConst").TYPES.INT32],mediaId:[26,d("WAProtoConst").TYPES.INT32],ephemeralMsgDisappeared:[27,d("WAProtoConst").TYPES.BOOL],threadJid:[28,d("WAProtoConst").TYPES.STRING],xmaId:[29,d("WAProtoConst").TYPES.INT32],specialTextSize:[30,d("WAProtoConst").TYPES.INT32],xmaMessageType:[31,d("WAProtoConst").TYPES.INT32],isExpiredXmaMsg:[32,d("WAProtoConst").TYPES.BOOL]};g.MsgContentProtoSpec=a;g.ReportingMetaProtoSpec=b;g.DbQuotedMsgProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=h;g.QuotedDbMediaProtoSpec=i;g.DbQuotedMsgContentProtoSpec=j;g.MessagesTableSchemaProtoSpec=k}),98);
__d("MAWArmadilloMetaRowTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null),i=babelHelpers["extends"]({},null),j=babelHelpers["extends"]({},null);a.internalSpec={encryptedSerializedCat:[1,d("WAProtoConst").TYPES.STRING],expirationTimeInSeconds:[2,d("WAProtoConst").TYPES.INT32]};b.internalSpec={publicKey:[1,d("WAProtoConst").TYPES.BYTES],privateKey:[2,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={intValue:[1,d("WAProtoConst").TYPES.INT32],strValue:[2,d("WAProtoConst").TYPES.STRING],boolValue:[3,d("WAProtoConst").TYPES.BOOL],__oneofs__:{value:["intValue","strValue","boolValue"]}};e.internalSpec={name:[1,d("WAProtoConst").TYPES.STRING],value:[2,d("WAProtoConst").TYPES.MESSAGE,c]};f.internalSpec={expoKey:[1,d("WAProtoConst").TYPES.INT32],value:[2,d("WAProtoConst").TYPES.STRING]};h.internalSpec={abKey:[1,d("WAProtoConst").TYPES.STRING],abHash:[2,d("WAProtoConst").TYPES.STRING],lastSyncTime:[3,d("WAProtoConst").TYPES.INT64],expoKeyStr:[4,d("WAProtoConst").TYPES.STRING],refresh:[5,d("WAProtoConst").TYPES.INT64],internalExpoKeys:[6,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING],propExpoKeys:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f],propValues:[8,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,e]};i.internalSpec={cat:[1,d("WAProtoConst").TYPES.MESSAGE,a],deviceUUID:[2,d("WAProtoConst").TYPES.STRING],regId:[3,d("WAProtoConst").TYPES.INT32],identityKeyPair:[4,d("WAProtoConst").TYPES.MESSAGE,b],fbid:[5,d("WAProtoConst").TYPES.STRING],deviceId:[6,d("WAProtoConst").TYPES.INT32],lastSignedPrekeyId:[7,d("WAProtoConst").TYPES.INT32],lastPrekeyId:[8,d("WAProtoConst").TYPES.INT32],lastPrekeyGenerationId:[9,d("WAProtoConst").TYPES.INT32],edgeInfo:[10,d("WAProtoConst").TYPES.BYTES],clockSkew:[11,d("WAProtoConst").TYPES.INT32],msgrDeviceId:[12,d("WAProtoConst").TYPES.STRING],abProps:[13,d("WAProtoConst").TYPES.MESSAGE,h],registrationVersion:[14,d("WAProtoConst").TYPES.INT32],authKeyPair:[15,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{value:["cat","deviceUUID","regId","identityKeyPair","fbid","deviceId","lastSignedPrekeyId","lastPrekeyId","lastPrekeyGenerationId","edgeInfo","clockSkew","msgrDeviceId","abProps","registrationVersion","authKeyPair"]}};j.internalSpec={key:[1,d("WAProtoConst").TYPES.STRING],value:[2,d("WAProtoConst").TYPES.MESSAGE,i]};g.ValidCatProtoSpec=a;g.KeyPairProtoSpec=b;g.AbPropTypeSpec=c;g.AbPropValueSpec=e;g.ExpoKeyMapSpec=f;g.AbPropsConfigSpec=h;g.ValueProtoSpec=i;g.MetaRowTableSchemaProtoSpec=j}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);a.internalSpec={deviceId:[1,d("WAProtoConst").TYPES.INT32],deviceResponse:[2,d("WAProtoConst").TYPES.BOOL]};b.internalSpec={keyHex:[1,d("WAProtoConst").TYPES.STRING],keyId:[2,d("WAProtoConst").TYPES.BYTES],timestamp:[3,d("WAProtoConst").TYPES.INT64],deviceResponses:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,a]};g.DeviceResponseSpec=a;g.MissingKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={id:[1,d("WAProtoConst").TYPES.STRING],userJid:[2,d("WAProtoConst").TYPES.STRING],deliveredWatermarkTs:[3,d("WAProtoConst").TYPES.INT64],lastReadWatermarkTs:[4,d("WAProtoConst").TYPES.INT64],type:[5,d("WAProtoConst").TYPES.STRING],addressable:[6,d("WAProtoConst").TYPES.BOOL],lastReadActionTs:[7,d("WAProtoConst").TYPES.INT64],nickname:[8,d("WAProtoConst").TYPES.STRING],threadId:[9,d("WAProtoConst").TYPES.INT32]};g.ParticipantsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={SET:0,REMOVE:1};b=babelHelpers["extends"]({},null);b.internalSpec={id:[1,d("WAProtoConst").TYPES.INT32],collection:[2,d("WAProtoConst").TYPES.STRING],index:[3,d("WAProtoConst").TYPES.STRING],binarySyncAction:[4,d("WAProtoConst").TYPES.BYTES],version:[5,d("WAProtoConst").TYPES.INT32],operation:[6,d("WAProtoConst").TYPES.ENUM,a],timestamp:[7,d("WAProtoConst").TYPES.INT64],action:[8,d("WAProtoConst").TYPES.STRING]};g.SYNCD_MUTATION_SYNCD_OPERATION=a;g.PendingMutationsTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={groupJid:[1,d("WAProtoConst").TYPES.STRING],senderKeyId:[2,d("WAProtoConst").TYPES.INT32],rotateSenderKey:[4,d("WAProtoConst").TYPES.BOOL],senderKeyTs:[5,d("WAProtoConst").TYPES.INT64],hasSenderKey:[6,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING]};g.PersonalSenderKeyStatusTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={ack:[1,d("WAProtoConst").TYPES.INT32],author:[2,d("WAProtoConst").TYPES.STRING],externalId:[3,d("WAProtoConst").TYPES.STRING],reactionId:[4,d("WAProtoConst").TYPES.STRING],reactToExternalId:[5,d("WAProtoConst").TYPES.STRING],reactToAuthor:[6,d("WAProtoConst").TYPES.STRING],reactToMsgId:[7,d("WAProtoConst").TYPES.STRING],threadJid:[8,d("WAProtoConst").TYPES.STRING],reaction:[9,d("WAProtoConst").TYPES.STRING],groupingKey:[10,d("WAProtoConst").TYPES.STRING],ts:[11,d("WAProtoConst").TYPES.INT64],rowId:[12,d("WAProtoConst").TYPES.INT32]};g.ReactionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null);a.internalSpec={deliveredTs:[1,d("WAProtoConst").TYPES.INT64],readTs:[2,d("WAProtoConst").TYPES.INT64]};b.internalSpec={userJid:[1,d("WAProtoConst").TYPES.STRING],dbUserStatusTs:[2,d("WAProtoConst").TYPES.MESSAGE,a]};c.internalSpec={deviceJid:[1,d("WAProtoConst").TYPES.STRING],serializedPubKey:[2,d("WAProtoConst").TYPES.BYTES],baseKey:[3,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={msgId:[1,d("WAProtoConst").TYPES.STRING],statusTsPerUser:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,b],permittedIdentitiesPerDevice:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,c],recipientDevices:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING]};f.internalSpec={device:[1,d("WAProtoConst").TYPES.STRING],ts:[2,d("WAProtoConst").TYPES.INT64]};h.internalSpec={pendingReceiptId:[1,d("WAProtoConst").TYPES.STRING],thread:[2,d("WAProtoConst").TYPES.STRING],externalId:[3,d("WAProtoConst").TYPES.STRING],author:[4,d("WAProtoConst").TYPES.STRING],deliveryReceipts:[5,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f],readReceipts:[6,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f]};g.DbUserStatusTsProtoSpec=a;g.StatusTsPerUserProtoSpec=b;g.IdentitiesPerDeviceProtoSpec=c;g.ReceiptsTableSchemaProtoSpec=e;g.ReceiptsSpec=f;g.PendingReceiptsTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={threadId:[1,d("WAProtoConst").TYPES.INT64],msgId:[2,d("WAProtoConst").TYPES.STRING]};g.RetroactiveBackupsStateTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSignalTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null);a.internalSpec={deviceJid:[1,d("WAProtoConst").TYPES.STRING],identity:[2,d("WAProtoConst").TYPES.BYTES],firstSeenTs:[3,d("WAProtoConst").TYPES.INT64],deviceName:[4,d("WAProtoConst").TYPES.STRING],platform:[5,d("WAProtoConst").TYPES.STRING],userJid:[6,d("WAProtoConst").TYPES.STRING]};b.internalSpec={keyId:[1,d("WAProtoConst").TYPES.INT32],encoded:[2,d("WAProtoConst").TYPES.BYTES],isDeleted:[3,d("WAProtoConst").TYPES.BOOL]};c.internalSpec={generationId:[1,d("WAProtoConst").TYPES.INT32],startingId:[2,d("WAProtoConst").TYPES.INT32],endingId:[3,d("WAProtoConst").TYPES.INT32],createdTs:[4,d("WAProtoConst").TYPES.INT64]};e.internalSpec={id:[1,d("WAProtoConst").TYPES.STRING],session:[2,d("WAProtoConst").TYPES.BYTES]};f.internalSpec={keyId:[1,d("WAProtoConst").TYPES.INT32],encoded:[2,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={id:[1,d("WAProtoConst").TYPES.STRING],groupJid:[2,d("WAProtoConst").TYPES.STRING],userJid:[3,d("WAProtoConst").TYPES.STRING],deviceId:[4,d("WAProtoConst").TYPES.INT32],record:[5,d("WAProtoConst").TYPES.BYTES]};g.IdentityTableSchemaProtoSpec=a;g.PrekeyTableSchemaProtoSpec=b;g.PrekeyGenerationTableSchemaProtoSpec=c;g.SessionTableSchemaProtoSpec=e;g.SignedPrekeyTableSchemaProtoSpec=f;g.SenderKeySessionsTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={index:[1,d("WAProtoConst").TYPES.STRING],binarySyncData:[2,d("WAProtoConst").TYPES.BYTES],actionState:[3,d("WAProtoConst").TYPES.STRING],version:[4,d("WAProtoConst").TYPES.INT32],keyId:[5,d("WAProtoConst").TYPES.BYTES],modelId:[6,d("WAProtoConst").TYPES.STRING],modelType:[7,d("WAProtoConst").TYPES.STRING],indexMac:[8,d("WAProtoConst").TYPES.BYTES],valueMac:[9,d("WAProtoConst").TYPES.BYTES],collection:[10,d("WAProtoConst").TYPES.STRING],timestamp:[11,d("WAProtoConst").TYPES.INT64],action:[12,d("WAProtoConst").TYPES.STRING]};g.SyncActionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);a.internalSpec={currentIndex:[1,d("WAProtoConst").TYPES.INT32],deviceIndexes:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.INT32],rawId:[3,d("WAProtoConst").TYPES.INT64]};b.internalSpec={id:[1,d("WAProtoConst").TYPES.BYTES],keyId:[2,d("WAProtoConst").TYPES.BYTES],keyData:[3,d("WAProtoConst").TYPES.BYTES],keyEpoch:[4,d("WAProtoConst").TYPES.INT64],timestamp:[5,d("WAProtoConst").TYPES.INT64],fingerprint:[6,d("WAProtoConst").TYPES.MESSAGE,a]};g.SyncKeyFingerprintSpec=a;g.SyncKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={taskName:[1,d("WAProtoConst").TYPES.STRING],scheduledTime:[2,d("WAProtoConst").TYPES.INT64]};g.TasksTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={jid:[1,d("WAProtoConst").TYPES.STRING],threadOrder:[2,d("WAProtoConst").TYPES.STRING],nextInChatMsgId:[3,d("WAProtoConst").TYPES.INT32],folder:[4,d("WAProtoConst").TYPES.INT32],newestMsg:[5,d("WAProtoConst").TYPES.STRING],oldestMsg:[6,d("WAProtoConst").TYPES.STRING],lastReadMsg:[7,d("WAProtoConst").TYPES.STRING],lastReadMsgReceiptSent:[8,d("WAProtoConst").TYPES.STRING],lastReadMsgTs:[9,d("WAProtoConst").TYPES.INT64],newestMsgTs:[10,d("WAProtoConst").TYPES.INT64],muteExpireTimeMs:[11,d("WAProtoConst").TYPES.INT64],muteCallsExpireTimeMs:[12,d("WAProtoConst").TYPES.INT64],archived:[13,d("WAProtoConst").TYPES.BOOL],cannotReplyReason:[14,d("WAProtoConst").TYPES.STRING],chatId:[15,d("WAProtoConst").TYPES.INT32],optimisticThreadKey:[16,d("WAProtoConst").TYPES.STRING],isMigratedLocally:[17,d("WAProtoConst").TYPES.BOOL],snippetMsg:[18,d("WAProtoConst").TYPES.STRING],deduplicationKey:[19,d("WAProtoConst").TYPES.STRING]};g.ThreadsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);a.internalSpec={type:[1,d("WAProtoConst").TYPES.STRING],ts:[2,d("WAProtoConst").TYPES.INT64],externalId:[3,d("WAProtoConst").TYPES.STRING],msgId:[4,d("WAProtoConst").TYPES.STRING],author:[5,d("WAProtoConst").TYPES.STRING],ack:[6,d("WAProtoConst").TYPES.INT32],resendCount:[7,d("WAProtoConst").TYPES.INT32],ephemeralSetting:[8,d("WAProtoConst").TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,d("WAProtoConst").TYPES.INT64],rowId:[10,d("WAProtoConst").TYPES.INT32],thread:[11,d("WAProtoConst").TYPES.INT32],mediaId:[12,d("WAProtoConst").TYPES.INT32],msgContent:[13,d("WAProtoConst").TYPES.STRING],threadJid:[14,d("WAProtoConst").TYPES.STRING],reportingMeta:[15,d("WAProtoConst").TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,d("WAProtoConst").TYPES.STRING],groupName:[17,d("WAProtoConst").TYPES.STRING],quote:[18,d("WAProtoConst").TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,d("WAProtoConst").TYPES.INT32],sortOrderMs:[20,d("WAProtoConst").TYPES.INT64]};g.UnrenderedMessagesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);a.internalSpec={associatedMessageId:[1,d("WAProtoConst").TYPES.STRING],author:[2,d("WAProtoConst").TYPES.STRING],ctas:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,b],defaultCTA:[4,d("WAProtoConst").TYPES.MESSAGE,b],defaultPreviewMediaId:[5,d("WAProtoConst").TYPES.INT32],externalId:[6,d("WAProtoConst").TYPES.STRING],faviconMediaId:[7,d("WAProtoConst").TYPES.INT32],headerMediaId:[8,d("WAProtoConst").TYPES.INT32],headerTitle:[9,d("WAProtoConst").TYPES.STRING],isTombstoned:[10,d("WAProtoConst").TYPES.BOOL],maxSubtitleNumOfLines:[11,d("WAProtoConst").TYPES.INT32],maxTitleNumOfLines:[12,d("WAProtoConst").TYPES.INT32],msgId:[13,d("WAProtoConst").TYPES.STRING],overlayDescription:[14,d("WAProtoConst").TYPES.STRING],overlayIconGlyph:[15,d("WAProtoConst").TYPES.INT32],overlayTitle:[16,d("WAProtoConst").TYPES.STRING],previewMediaIds:[17,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.INT32],subtitleText:[18,d("WAProtoConst").TYPES.STRING],targetExpiringAtSec:[19,d("WAProtoConst").TYPES.INT64],targetId:[20,d("WAProtoConst").TYPES.STRING],targetType:[21,d("WAProtoConst").TYPES.INT32],targetUsername:[22,d("WAProtoConst").TYPES.STRING],threadJid:[23,d("WAProtoConst").TYPES.STRING],titleText:[24,d("WAProtoConst").TYPES.STRING],xmaId:[25,d("WAProtoConst").TYPES.INT32],xmaLayoutType:[26,d("WAProtoConst").TYPES.INT32]};b.internalSpec={buttonType:[1,d("WAProtoConst").TYPES.INT32],title:[2,d("WAProtoConst").TYPES.STRING],actionUrl:[3,d("WAProtoConst").TYPES.STRING],nativeUrl:[4,d("WAProtoConst").TYPES.STRING]};g.XMATableSchemaProtoSpec=a;g.CTAProtoSpec=b}),98);
__d("MAWXMACTAUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}function b(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}f.toMAWCTAEncode=a;f.fromMAWCTAEncode=b}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({SET:0,REMOVE:1});c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);var h=babelHelpers["extends"]({},null),i=babelHelpers["extends"]({},null),j=babelHelpers["extends"]({},null),k=babelHelpers["extends"]({},null),l=babelHelpers["extends"]({},null),m=babelHelpers["extends"]({},null),n=babelHelpers["extends"]({},null);c.internalSpec={version:[1,d("WAProtoConst").TYPES.UINT64]};e.internalSpec={code:[1,d("WAProtoConst").TYPES.UINT64],text:[2,d("WAProtoConst").TYPES.STRING]};f.internalSpec={blob:[1,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={blob:[1,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={id:[1,d("WAProtoConst").TYPES.BYTES]};i.internalSpec={index:[1,d("WAProtoConst").TYPES.MESSAGE,f],value:[2,d("WAProtoConst").TYPES.MESSAGE,b],keyId:[3,d("WAProtoConst").TYPES.MESSAGE,h]};j.internalSpec={mediaKey:[1,d("WAProtoConst").TYPES.BYTES],directPath:[2,d("WAProtoConst").TYPES.STRING],handle:[3,d("WAProtoConst").TYPES.STRING],fileSizeBytes:[4,d("WAProtoConst").TYPES.UINT64],fileSha256:[5,d("WAProtoConst").TYPES.BYTES],fileEncSha256:[6,d("WAProtoConst").TYPES.BYTES]};k.internalSpec={version:[1,d("WAProtoConst").TYPES.MESSAGE,c],records:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,i],mac:[3,d("WAProtoConst").TYPES.BYTES],keyId:[4,d("WAProtoConst").TYPES.MESSAGE,h]};l.internalSpec={mutations:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,m]};m.internalSpec={operation:[1,d("WAProtoConst").TYPES.ENUM,a],record:[2,d("WAProtoConst").TYPES.MESSAGE,i]};n.internalSpec={version:[1,d("WAProtoConst").TYPES.MESSAGE,c],mutations:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,m],externalMutations:[3,d("WAProtoConst").TYPES.MESSAGE,j],snapshotMac:[4,d("WAProtoConst").TYPES.BYTES],patchMac:[5,d("WAProtoConst").TYPES.BYTES],keyId:[6,d("WAProtoConst").TYPES.MESSAGE,h],exitCode:[7,d("WAProtoConst").TYPES.MESSAGE,e],deviceIndex:[8,d("WAProtoConst").TYPES.UINT32]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);
__d("WABinary",["WAErr","WAHex"],(function(a,b,c,d,e,f,g){var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c("WAErr")("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw c("WAErr")(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c("WAErr")("ParseError: varint exceeds 64 bits");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c("WAErr")(typeof a==="string"?'TyperError WriteError: string "'+a+'" is not a valid '+e:"TypeError WriteError: "+String(a)+" is not a valid "+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c("WAErr")("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];n=o[1];var p=o[0];g.push(p);j.push(n);if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){p=o[2];if(typeof p.cast==="function")f[m]=p;else{n=!0;o=0;for(var q in p)n&&q!==o++&&(n=!1);q=void 0;if(n){q=[];for(n=0;n<o;n++)q.push(!0)}else{q={};for(n in p)q[p[n]]=!0}f[m]=q}}else f[m]=null}var r={};o=function(a){l[a].forEach(function(b){r[b]||(r[b]=[]),r[b].push(a)})};for(n in l)o(n);p=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];m=new h(e,g,j,k,f,l,r,p,q);a.internalCompiledSpec=m;return m}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q];if(r===void 0)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);o=j[n];o&&o.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field name is reserved"})}};for(var n=0;n<c.length&&!m;n++)b(n);return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d("WAProtoCompile").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers["extends"]({},f)||{};s.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(f=0;f<g.length;f++)l[f]&d("WAProtoConst").FLAGS.REPEATED&&(s[g[f]]=[]);var t=0;c=k.length>0;a=k[0];while(b.size()){f=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var u=f&7,v=f>>>3;if(c&&v!==a){f=t;do++t===k.length&&(t=0),a=k[t];while(v!==a&&t!==f)}if(c&&v===a)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d("WAProtoConst").TYPE_MASK,j=m[t];if(c&d("WAProtoConst").FLAGS.PACKED){var k=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(k);while(k.size()){var w=i(a,f,k);(f!==d("WAProtoConst").TYPES.ENUM||j[w]||(j.cast==null?void 0:j.cast(w))!==void 0)&&s[a].push(w)}}else if(f===d("WAProtoConst").TYPES.MESSAGE){w=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(w);if(c&d("WAProtoConst").FLAGS.REPEATED)s[a].push(n(j,k,void 0,e));else{w=s[a];s[a]=n(j,k,w,e)}}else{k=i(a,f,b);(f!==d("WAProtoConst").TYPES.ENUM||j[k]||(j.cast==null?void 0:j.cast(k))!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?s[a].push(k):s[a]=k)}w=p[a];w&&typeof s[a]!=="undefined"&&w.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else{s.$$unknownFieldCount++;if(e){s.$$unsafeUnknownFields||(s.$$unsafeUnknownFields={});f=void 0;switch(u){case d("WAProtoConst").ENC.VARINT:f=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:f=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:f=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:f=b.readBinary(4);break}s.$$unsafeUnknownFields[v]=f}else u===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):u===d("WAProtoConst").ENC.BIT64?b.advance(8):u===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):u===d("WAProtoConst").ENC.BIT32&&b.advance(4)}}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithUnknowns=b;g.getUnknownFields=e}),98);
__d("MAWDbObjDecode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloRetroactiveBackupsStateTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWXMACTAUtil","WAMsgType","WAServerSync.pb","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h={appData:function(a){return H(a)},appMeta:function(a){return I(a)},browserEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},chunk:function(a){return J(a)},collectionVersions:function(a){return S(a)},contacts:function(a){return C(a)},deviceChangeAlerts:function(a){return i(a)},dualSendMedia:function(a){throw c("err")("unexpected table for decryption")},dyiBatch:function(a){return N(a)},existingUsers:function(a){throw c("err")("unexpected table for decryption")},ftsBackloggedMessages:function(a){throw c("err")("unexpected table for decryption")},ftsEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},ftsIndexV3:function(a){throw c("err")("unexpected table for decryption")},groupInfo:function(a){return p(a)},groupInvites:function(a){return E(a)},historySyncQRCodeData:function(a){throw c("err")("unexpected table for decryption")},historySyncQRCodeSecretKey:function(a){throw c("err")("unexpected table for decryption")},identity:function(a){return s(a)},isDualSend:function(a){throw c("err")("unexpected table for decryption")},jobs:function(a){throw c("err")("unexpected table for decryption")},media:function(a){return L(a)},mediaBackup:function(a){return K(a)},messages:function(a){return m(a)},meta:function(a){return r(a)},missingKeys:function(a){return Q(a)},participants:function(a){return D(a)},pendingMutations:function(a){return R(a)},pendingReceipts:function(a){return A(a)},pendingStanzas:function(a){throw c("err")("unexpected table for decryption")},personalSenderKeyStatuses:function(a){return G(a)},prekey:function(a){return t(a)},prekeyGeneration:function(a){return u(a)},reactions:function(a){return M(a)},receipts:function(a){return z(a)},retroactiveBackupsState:function(a){return O(a)},senderKeySessions:function(a){return x(a)},session:function(a){return v(a)},signedPrekey:function(a){return w(a)},stanzaQueue:function(a){throw c("err")("unexpected table for decryption")},syncActions:function(a){return P(a)},syncKeys:function(a){return T(a)},tasks:function(a){return F(a)},threads:function(a){return B(a)},unrenderedMessages:function(a){return n(a)},uploadRetryStatus:function(a){throw c("err")("unexpected table for decryption")},xma:function(a){return U(a)}};function a(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function i(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a);return{action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,location:a.location,loggedOut:a.loggedOut,model:a.model,platform:a.platform,ts:a.ts}}function j(a){a=a.quote;var b;if(a!=null){if(a.content==null)throw c("err")("QuotedMsgContent missing upon decoding");var d=a.content,e=d.author,f=d.externalId,g=d.mediaId,h=d.msgContent,i=d.msgId,j=d.sourceId,k=d.specialTextSize,l=d.ts,m=d.type;d=d.xmaMessageType;b={content:babelHelpers["extends"]({},a.content,{author:e,externalId:f,mediaId:g,msgContent:h,msgId:i,sourceId:j,specialTextSize:k,ts:l,type:m,xmaMessageType:d}),remoteJid:a.remoteJid}}return b}function k(a){if(a==null)return a;else return new Uint8Array(a)}function l(a){if(a==null||a.length===0)return new Set();else return new Set(a)}function m(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,a);var b=a.msgContent;if(a.type===d("WAMsgType").MSG_TYPE.FUTUREPROOF){if(b==null)throw c("err")("MsgContent missing upon decoding futureproof message");b.subtype=b.subtype}var e=j(a),f=o(a.reportingMeta);return babelHelpers["extends"]({},a,{msgContent:b,quote:e,reportingMeta:f})}function n(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,a);var b=j(a),c=o(a.reportingMeta);return babelHelpers["extends"]({},a,{quote:b,reportingMeta:c})}function o(a){if(a==null)return;return{frankingTag:a.frankingTag!=null?new Uint8Array(a.frankingTag):a.frankingTag,frankingVersion:a.frankingVersion,reportingContent:a.reportingContent,reportingTag:a.reportingTag!=null?new Uint8Array(a.reportingTag):a.reportingTag}}function p(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a);return{creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion}}function q(a,b){var d;a=a;if(a==null)d=a;else{var e=a.privateKey;a=a.publicKey;if(e==null||a==null)throw c("err")("Decoding "+b+" private or public key missing");d={privateKey:new Uint8Array(e),publicKey:new Uint8Array(a)}}return d}function r(a){var b,c,e,f;a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,a);b=(b=a.value)==null?void 0:b.cat;if(b==null)b=b;else{var g;b={encrypted_serialized_cat:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.encryptedSerializedCat,expiration_time_in_seconds:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.expirationTimeInSeconds}}g=(g=a.value)==null?void 0:g.edgeInfo;g=k(g);c=q((c=a.value)==null?void 0:c.identityKeyPair,"identityKeyPair");e=q((e=a.value)==null?void 0:e.authKeyPair,"authKeyPair");return{value:{abProps:(f=a.value)==null?void 0:f.abProps,authKeyPair:e,cat:b,clockSkew:(f=a.value)==null?void 0:f.clockSkew,deviceId:(e=a.value)==null?void 0:e.deviceId,deviceUUID:(b=a.value)==null?void 0:b.deviceUUID,edgeInfo:g,fbid:(f=a.value)==null?void 0:f.fbid,identityKeyPair:c,lastPrekeyGenerationId:(e=a.value)==null?void 0:e.lastPrekeyGenerationId,lastPrekeyId:(b=a.value)==null?void 0:b.lastPrekeyId,lastSignedPrekeyId:(g=a.value)==null?void 0:g.lastSignedPrekeyId,regId:(f=a.value)==null?void 0:f.regId,registrationVersion:(c=a.value)==null?void 0:c.registrationVersion}}}function s(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a);var b=a.identity,c=a.firstSeenTs;b=k(b);return{deviceName:a.deviceName,firstSeenTs:c,identity:b,platform:a.platform}}function t(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a);var b=a.encoded;b=k(b);return{encoded:b,isDeleted:a.isDeleted}}function u(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a)}function v(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a);a=a.session;a=k(a);return{session:a}}function w(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a);a=a.encoded;a=k(a);return{encoded:a}}function x(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a);var b=a.record;b=k(b);return{deviceId:a.deviceId,record:b}}function y(a){if(a.length===0)return null;else return new Map(a.map(function(a){var b=a.deviceJid;if(b==null||a.serializedPubKey==null)throw c("err")("Expected deviceJid or serializedPubKey are missing ");var d=new Uint8Array(a.serializedPubKey);a=k(a.baseKey);a={baseKey:a,pubKey:d};return[b,a]}))}function z(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,a);var b,e=a.statusTsPerUser;e==null?b=new Map():b=new Map(e.map(function(a){if(a.userJid==null||a.dbUserStatusTs==null)throw c("err")("Expected userJid or dbUserStatus are missing ");return[a.userJid,a.dbUserStatusTs]}));e=a.recipientDevices;e=l(e);return{statusTsPerUser:b,permittedIdentitiesPerDevice:y(a.permittedIdentitiesPerDevice),recipientDevices:e}}function A(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a)}function B(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a);return{archived:a.archived,cannotReplyReason:a.cannotReplyReason,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteCallsExpireTimeMs:a.muteCallsExpireTimeMs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,nextInChatMsgId:a.nextInChatMsgId,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg}}function C(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a);var b=a.icdcInfo,c;b!=null&&(c={devices:b.devices.map(function(a){return new Uint8Array(a)}),dirty:b.dirty,sequence:b.sequence,signingDeviceIndex:b.signingDeviceIndex,timestamp:b.timestamp});return{devices:a.devices,dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:c,isBlocked:a.isBlocked,isRestricted:a.isRestricted,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch,relationship:a.relationship}}function D(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a)}function E(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a)}function F(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a)}function G(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,a);var b=a.hasSenderKey;b=l(b);return{hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs}}function H(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,a);return{ack:a.ack,contents:a.contents,permittedIdentitiesPerDevice:y(a.permittedIdentitiesPerDevice),recipientDevices:new Set(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts}}function I(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a)}function J(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a)}function K(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a)}function L(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,a);var b,e=a.mediaEntries;e==null?b=new Map():b=new Map(e.map(function(a){if(a.msgId==null||a.mediaEntryData==null)throw c("err")("Expected msgId or mediaEntryData are missing ");return[a.msgId,new Uint8Array(a.mediaEntryData)]}));return{mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo}}function M(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a);return{ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts}}function N(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a);return{isThread:a.isThread,numMessages:a.numMessages,oldestTs:a.oldestTs,threadId:a.threadId}}function O(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb").RetroactiveBackupsStateTableSchemaProtoSpec,a);return{msgId:a.msgId}}function P(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,a);return{binarySyncData:a.binarySyncData,keyId:a.keyId,timestamp:a.timestamp,valueMac:a.valueMac,version:a.version}}function Q(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,a);var b;a.deviceResponses==null?b=new Map():b=new Map(a.deviceResponses.map(function(a){if(a.deviceId==null)throw c("err")("Expected deviceId is missing");else return[a.deviceId,a.deviceResponse]}));return{deviceResponses:b,keyId:a.keyId,timestamp:a.timestamp}}function R(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,a);var b;switch(a.operation){case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw c("err")("operation missing when decoding PendingMutation")}return{binarySyncAction:a.binarySyncAction,operation:b,timestamp:a.timestamp,version:a.version}}function S(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,a);return{finiteFailureStartTime:a.finiteFailureStartTime,isCollectionInMacMismatchFatal:a.isCollectionInMacMismatchFatal,ltHash:a.ltHash,state:a.state,version:a.version}}function T(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,a);return{fingerprint:a.fingerprint,keyData:a.keyData,timestamp:a.timestamp}}function U(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,a);return{author:a.author,ctas:a.ctas.map(function(a){return d("MAWXMACTAUtil").fromMAWCTAEncode(a)}),defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").fromMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType}}g.decodeDbObj=a}),98);
__d("WASyncdConst",["$InternalEnum","WATimeUtils"],(function(a,b,c,d,e,f,g){a=1e3;c=1e3*60*60;e=2;f=d("WATimeUtils").DAY_MILLISECONDS*2;d=100;var h=2e3,i=10,j=100,k=0,l=3,m=7,n=(b=b("$InternalEnum"))({Star:"star",Contact:"contact",Mute:"mute",PinDEPRECATED:"pin",Pin:"pin_v1",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat",DeleteMessageForMe:"deleteMessageForMe",Sentinel:"sentinel",UnarchiveChatsSetting:"setting_unarchiveChats",DeleteChat:"deleteChat",AndroidUnsupportedActions:"android_unsupported_actions",PrimaryFeature:"primary_feature",Subscription:"subscription",Nux:"nux",Agent:"deviceAgent",TimeFormat:"time_format",UserStatusMute:"userStatusMute",PrimaryVersion:"primary_version",RemoveRecentSticker:"removeRecentSticker",ChatAssignment:"agentChatAssignment",ChatAssignmentOpenedStatus:"agentChatAssignmentOpenedStatus",FavoriteSticker:"favoriteSticker"}),o=b({Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"}),p=b.Mirrored(["Success","SuccessHasMore","Conflict","ConflictHasMore","ErrorRetry","ErrorFatal","Blocked"]),q=b.Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]),r=b.Mirrored(["Success","Malformed","Orphan","Unsupported","Skipped","Failed"]),s=b.Mirrored(["Msg","Chat","Agent","ChatAssignment","UserStatusMute"]),t=b.Mirrored(["ApplyRemoteAndDropLocal","SkipRemote","SkipRemoteAndDropLocal"]);b=b.Mirrored(["Patch","Snapshot","Local"]);g.BACKOFF_MIN_TIMEOUT=a;g.BACKOFF_MAX_TIMEOUT=c;g.BACKOFF_BASE=e;g.FINITE_FAILURE_EXPIRY_DURATION=f;g.MIN_INLINE_MUTATIONS=d;g.MAX_INLINE_MUTATIONS=h;g.MIN_PATCH_SIZE=i;g.MAX_PATCH_SIZE=j;g.DEFAULT_COLLECTION_VERSION=k;g.LABEL_ASSOCIATION_SYNC_VERSION=l;g.CHAT_ASSIGNMENT_SYNC_VERSION=m;g.Actions=n;g.CollectionName=o;g.CollectionState=p;g.CollectionSyncState=q;g.SyncActionState=r;g.SyncModelType=s;g.ConflictResolutionState=t;g.SyncDataType=b}),98);
__d("WASyncdKeyTypes",[],(function(a,b,c,d,e,f){function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else{a.writeVarInt(k);o=m[p];o(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("MAWDbObjEncode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloRetroactiveBackupsStateTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWXMACTAUtil","WAMsgType","WAServerSync.pb","WASyncdConst","WASyncdKeyTypes","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h={appData:A,appMeta:B,browserEncryptionMeta:b,chunk:C,collectionVersions:O,contacts:v,deviceChangeAlerts:a,dualSendMedia:b,dyiBatch:G,existingUsers:b,ftsBackloggedMessages:b,ftsEncryptionMeta:b,ftsIndexV3:b,groupInfo:j,groupInvites:x,historySyncQRCodeData:b,historySyncQRCodeSecretKey:b,identity:l,isDualSend:b,jobs:b,media:E,mediaBackup:D,messages:f,meta:k,missingKeys:K,participants:w,pendingMutations:M,pendingReceipts:t,pendingStanzas:b,personalSenderKeyStatuses:z,prekey:m,prekeyGeneration:n,reactions:F,receipts:s,retroactiveBackupsState:H,senderKeySessions:q,session:o,signedPrekey:p,stanzaQueue:b,syncActions:I,syncKeys:P,tasks:y,threads:u,unrenderedMessages:i,uploadRetryStatus:b,xma:Q};function a(a){a={action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,location:a.location,loggedOut:a.loggedOut,model:a.model,platform:a.platform,ts:a.ts};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a).readByteArray()}}function b(a){throw c("err")("unexpected table for encryption")}function e(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function f(a){a.altIndex;a.externalId;a.messageDeleteTs;a.messageExpirationTs;a.msgId;a.quoteExternalId;a.revokedExternalId;a.rowId;a.sortOrderMs;a.thread;a.threadJid;a.unsendMsgContentDeleteTs;a=babelHelpers.objectWithoutPropertiesLoose(a,["altIndex","externalId","messageDeleteTs","messageExpirationTs","msgId","quoteExternalId","revokedExternalId","rowId","sortOrderMs","thread","threadJid","unsendMsgContentDeleteTs"]);a=a;var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,specialTextSize:a.quote.content.specialTextSize,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c=a.msgContent;a.type===d("WAMsgType").MSG_TYPE.FUTUREPROOF&&(c={protobuf:a.msgContent.protobuf,subtype:a.msgContent.subtype});c={ack:a.ack,author:a.author,ephemeralCounterStarted:a.ephemeralCounterStarted,ephemeralMsgDisappeared:a.ephemeralMsgDisappeared,ephemeralSetting:a.ephemeralSetting,forwardingScore:a.forwardingScore,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:a.isForwarded,mediaId:a.mediaId,msgContent:c,originalTs:a.originalTs,quote:b,reportingMeta:a.reportingMeta,resendCount:a.resendCount,serverTs:a.serverTs,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,c).readByteArray()}}function i(a){var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c={ack:a.ack,author:a.author,ephemeralSetting:a.ephemeralSetting,groupName:a.groupName,invitedParticipantUserJid:a.invitedParticipantUserJid,mediaId:a.mediaId,msgContent:a.msgContent,quote:b,reportingMeta:a.reportingMeta,resendCount:a.resendCount,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,c).readByteArray()}}function j(a){a={creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a).readByteArray()}}function k(a){var b=a.value.cat==null?a.value.cat:{encryptedSerializedCat:a.value.cat.encrypted_serialized_cat,expirationTimeInSeconds:a.value.cat.expiration_time_in_seconds};b={value:{abProps:a.value.abProps,authKeyPair:a.value.authKeyPair,cat:b,clockSkew:a.value.clockSkew,deviceId:a.value.deviceId,deviceUUID:a.value.deviceUUID,edgeInfo:a.value.edgeInfo,fbid:a.value.fbid,identityKeyPair:a.value.identityKeyPair,lastPrekeyGenerationId:a.value.lastPrekeyGenerationId,lastPrekeyId:a.value.lastPrekeyId,lastSignedPrekeyId:a.value.lastSignedPrekeyId,regId:a.value.regId,registrationVersion:a.value.registrationVersion}};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,b).readByteArray()}}function l(a){a={deviceName:a.deviceName,firstSeenTs:a.firstSeenTs,identity:a.identity,platform:a.platform};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a).readByteArray()}}function m(a){a={encoded:a.encoded,isDeleted:a.isDeleted};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a).readByteArray()}}function n(a){a={createdTs:a.createdTs,endingId:a.endingId,startingId:a.startingId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a).readByteArray()}}function o(a){a={session:a.session};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a).readByteArray()}}function p(a){a={encoded:a.encoded};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a).readByteArray()}}function q(a){a={deviceId:a.deviceId,record:a.record};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a).readByteArray()}}function r(a){if(a==null)return a;else return Array.from(a,function(a){var b=a[0];a=a[1];return{baseKey:a.baseKey,deviceJid:b,serializedPubKey:a.pubKey}})}function s(a){var b=Array.from(a.statusTsPerUser,function(a){var b=a[0];a=a[1];return{dbUserStatusTs:a,userJid:b}}),c=Array.from(a.recipientDevices);a={permittedIdentitiesPerDevice:r(a.permittedIdentitiesPerDevice),recipientDevices:c,statusTsPerUser:b};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,a).readByteArray()}}function t(a){a={author:a.author,deliveryReceipts:a.deliveryReceipts,externalId:a.externalId,readReceipts:a.readReceipts,thread:a.thread};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a).readByteArray()}}function u(a){a={archived:a.archived,cannotReplyReason:a.cannotReplyReason,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteCallsExpireTimeMs:a.muteCallsExpireTimeMs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,nextInChatMsgId:a.nextInChatMsgId,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a).readByteArray()}}function v(a){a={devices:a.devices,dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:a.icdcInfo,isBlocked:a.isBlocked,isRestricted:a.isRestricted,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch,relationship:a.relationship};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a).readByteArray()}}function w(a){a={addressable:a.addressable,deliveredWatermarkTs:a.deliveredWatermarkTs,lastReadActionTs:a.lastReadActionTs,lastReadWatermarkTs:a.lastReadWatermarkTs,nickname:a.nickname,type:a.type};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a).readByteArray()}}function x(a){a={caption:a.caption,inviteCode:a.inviteCode,inviteExpirationTs:a.inviteExpirationTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a).readByteArray()}}function y(a){a={scheduledTime:a.scheduledTime};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a).readByteArray()}}function z(a){var b=Array.from(a.hasSenderKey);b={hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,b).readByteArray()}}function A(a){var b;switch(a.contents.type){case"meta_sync":var e=[];for(var f=a.contents.actions,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;i.chatAction?e.push({chatAction:i.chatAction}):i.messageAction&&e.push({messageAction:i.messageAction})}b={actions:e,type:"meta_sync"};break;case"backups_secrets":b={encryptedBackupsSecrets:a.contents.encryptedBackupsSecrets,type:"backups_secrets"};break;case"sync_key_share":b={syncKeyShare:{keys:a.contents.syncKeyShare.keys,orphanKeys:(i=a.contents.syncKeyShare)==null?void 0:(h=i.orphanKeys)==null?void 0:h.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break;case"sync_key_request":b={syncKeyRequest:{keyIds:a.contents.syncKeyRequest.keyIds.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break;default:a.contents.type;throw c("err")("Unknown appdata type: "+a.contents.type)}g={ack:a.ack,contents:b,permittedIdentitiesPerDevice:r(a.permittedIdentitiesPerDevice),recipientDevices:Array.from(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts};return{encodedFields:g,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,g).readByteArray()}}function B(a){a={value:a.value};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a).readByteArray()}}function C(a){a={blobData:a.blobData,mimetype:a.mimetype,plaintextHash:a.plaintextHash};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a).readByteArray()}}function D(a){a={fbid:a.fbid};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a).readByteArray()}}function E(a){var b=Array.from(a.mediaEntries,function(a){var b=a[0];a=a[1];return{mediaEntryData:a,msgId:b}});b={mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,b).readByteArray()}}function F(a){a={ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a).readByteArray()}}function G(a){a={isThread:a.isThread,numMessages:a.numMessages,oldestTs:a.oldestTs,threadId:a.threadId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a).readByteArray()}}function H(a){a={msgId:a.msgId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb").RetroactiveBackupsStateTableSchemaProtoSpec,a).readByteArray()}}function I(a){a={binarySyncData:a.binarySyncData,keyId:d("WASyncdKeyTypes").fromSyncKeyId(a.keyId),timestamp:a.timestamp,valueMac:a.valueMac,version:a.version};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,a).readByteArray()}}function J(a){return Array.from(a,function(a){var b=a[0];a=a[1];return{deviceId:b,deviceResponse:a}})}function K(a){a={deviceResponses:J(a.deviceResponses),keyId:d("WASyncdKeyTypes").fromSyncKeyId(a.keyId),timestamp:a.timestamp};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,a).readByteArray()}}function L(a){switch(a){case d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET:return d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET;case d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE:return d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE}}function M(a){a={binarySyncAction:a.binarySyncAction,operation:L(a.operation),timestamp:a.timestamp,version:a.version};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,a).readByteArray()}}function N(a){switch(a){case d("WASyncdConst").CollectionSyncState.UpToDate:return"UpToDate";case d("WASyncdConst").CollectionSyncState.Dirty:return"Dirty";case d("WASyncdConst").CollectionSyncState.FailingFiniteRetry:return"FailingFiniteRetry";case d("WASyncdConst").CollectionSyncState.Fatal:return"Fatal";case d("WASyncdConst").CollectionSyncState.Blocked:return"Blocked"}}function O(a){a={finiteFailureStartTime:a.finiteFailureStartTime,isCollectionInMacMismatchFatal:a.isCollectionInMacMismatchFatal,ltHash:a.ltHash,state:N(a.state),version:a.version};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,a).readByteArray()}}function P(a){a={fingerprint:a.fingerprint,keyData:d("WASyncdKeyTypes").fromSyncKeyData(a.keyData),timestamp:a.timestamp};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,a).readByteArray()}}function Q(a){var b=a.ctas==null?[]:a.ctas.map(function(a){return d("MAWXMACTAUtil").toMAWCTAEncode(a)});b={author:a.author,ctas:b,defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").toMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,b).readByteArray()}}g.encodeDbObj=e}),98);
__d("MAWDbObjEncryption",["MAWCryptoConsts","MAWDbObjDecode","MAWDbObjEncode","MAWGating","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWQplProxy","err","qpl"],(function(a,b,c,d,e,f,g){var h=1/1e3,i="_encryptedContent";function a(a,b,e){if(!d("MAWGating").isEncryptionAtRestEnabled()||!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b))return a;var f=Math.random()<h;f=f?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25300256,"115")):null;try{var g=babelHelpers["extends"]({},a);e=e();var j=e.key;e=e.version;e=d("MAWKeychainUtil").makeAAD(e,d("MAWCryptoConsts").CIPHER_ID);var k=d("MAWDbObjEncode").encodeDbObj(a,b),l=k.encodedFields;k=k.proto;Object.keys(l).forEach(function(b){Object.prototype.hasOwnProperty.call(a,b)&&delete g[b]});l=d("MAWKeychainNaClCrypto").encrypt(j,k,e);g[i]=l;f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail("ear_encrypt_fail");throw c("err")(a.message+" - Encrypted dexie was unable to encrypt an entity for table "+b)}}function b(a,b,e){if(!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b)||!Object.prototype.hasOwnProperty.call(a,i))return a;var f=Math.random()<h;f=f?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25313004,"118")):null;try{var g=a[i];a=babelHelpers["extends"]({},a);var j=d("MAWKeychainCrypto").getKeyVersionFromCipherDataString(g);e=e(j);e=e.key;var k={};e=d("MAWKeychainNaClCrypto").decrypt(e,g,j);var l=d("MAWDbObjDecode").decodeDbObj(e,b);Object.keys(l).forEach(function(a){k[a]=l[a]});delete a[i];g=babelHelpers["extends"]({},a,k);f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail("ear_decrypt_fail");a instanceof d("MAWKeychainNaClCrypto").EARDecryptionError&&d("MAWGating").isDbCleanupEnabled()&&d("MAWIndexedDb").deleteDb();throw c("err")(a.message+" - Encrypted dexie was unable to decrypt an entity for table "+b)}}g.ENCRYPTED_COLUMN_NAME=i;g.encryptDbObj=a;g.decryptDbObj=b}),98);
__d("MAWSignalIndexedDb",["MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WALogger","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[JOB] Setting up the jobs database"]);h=function(){return a};return a}var i=null,j=null,k="jobs";function l(){if(i==null)throw c("err")("SignalDB IndexDB should've been initialized");return i}function m(){if(j==null)throw c("err")("SignalDB IndexDB should've been initialized");return j.then(function(){return l()})}function a(){return i!=null}function e(a){if(j!=null)return j;if(i!=null)return b("Promise").resolve();j=new(b("Promise"))(function(b){d("WALogger").LOG(h());var e=indexedDB.open(d("MAWIndexedDbMetadata").signalDbName(a));e.onupgradeneeded=function(a){a=a.target.result;if(!a.objectStoreNames.contains(k)){a=a.createObjectStore(k,{autoIncrement:!0,keyPath:"jobId"});a.createIndex("uniqKey","uniqKey")}};e.onsuccess=function(a){var c=a.target.result;c.onversionchange=function(){c.close(),globalThis.location.reload==null?void 0:globalThis.location.reload()};i=c;b()};e.onerror=function(a){throw c("unrecoverableViolation")("Can not create job db","messenger_e2ee_web",a?{error:a}:{})}});return j}function n(a){return a===d("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function f(a,b){var e=n(a);return function(a){return function(){for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=b!=null?d("MAWQplProxy").startQplUserFlow(b):null;return m().then(function(b){var c=function(a){a=b.transaction(k,a!=null?n(a):e);return a.objectStore(k)};return a.apply(void 0,[c].concat(g))}).then(function(a){i==null?void 0:i.endSuccess();return a})["catch"](function(a){i==null?void 0:i.endFail("job_transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw c("unrecoverableViolation")("Error performing transaction in job transactor v2","messenger_e2ee_web",a?{error:a}:{})})}}}g.getSignalDB=l;g.isSignalDBInitted=a;g.makeSignalDB=e;g.makeSignalMsgrTransactor=f}),98);
__d("WAExternalIdFromRandomHex",["WAHex","WAStanzaUtils"],(function(a,b,c,d,e,f,g){function a(a){a=new Uint8Array(d("WAHex").parseHex(a));var b=new Uint8Array(a.length+1),c=0;for(var e=0;e<a.length;e++)c^=a[e],b[e]=a[e];b[a.length]=c;return d("WAStanzaUtils").toStanzaId(d("WAHex").toHex(b))}g.externalIdFromRandomHex=a}),98);
__d("MAWExternalId",["MAWGating","Random","WAExternalIdFromRandomHex","WAHex","WAStanzaUtils","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";var h=4194303;function i(a){return Math.floor(c("Random").random()*a)}function a(){return!d("MAWGating").isMobileExternalIdFormatEnabled()?d("WAExternalIdFromRandomHex").externalIdFromRandomHex(d("WAHex").randomHex(7)):d("WAStanzaUtils").toStanzaId(d("bs_caml_int64").to_string(d("bs_caml_int64").and_(d("bs_caml_int64").or_(d("bs_caml_int64").lsl_(d("bs_caml_int64").of_float(Date.now()),22),d("bs_caml_int64").and_(d("bs_caml_int64").of_float(i(h)),d("bs_caml_int64").of_float(h))),d("bs_caml_int64").max_int)))}g.generateExternalId=a}),98);
__d("WABaseGlobals",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a}function i(){if(h==null)throw c("WAErr")("Trying to access WAGlobals before being set");return h}function b(a){var b=i();b.myJids=a}function d(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function j(){return i().jidUtils}function k(){return i().config}function l(){return i().qpl}function m(a,b){return i().runInTransaction(a,b)}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=d;g.getMyUserJid=e;g.getDbImpls=f;g.getJidUtilsApi=j;g.getConfig=k;g.getQplConfig=l;g.runInTransaction=m}),98);
__d("WAGlobals",["WABaseGlobals","WAErr","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a,d("WABaseGlobals").setGlobals(a)}function i(){if(h==null)throw c("WAErr")("WaMsgr api called before set");return h}function b(a,b){var d=i();if(d.myJids!=null)throw c("WAErr")("Trying to set UserJid and DeviceJid but they are already set");d.myJids={userJid:a,deviceJid:b}}function j(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function k(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(j())}function l(){return i().jidUtils}function m(){if(i().config.useCryptoManagerV2())return i().crypto.inMemoryManager;else return i().crypto.manager}function n(){return i().crypto.inMemoryManager}function o(){return i().crypto.storage}function p(){return i().config}function q(){return i().dependencies}function r(){return i().serverRPC}function s(a,b,c){return i().runInTransaction(a,b,c)}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=j;g.getMyUserJid=e;g.getDbImpls=f;g.isPeerDevice=k;g.getJidUtilsApi=l;g.getCryptoManager=m;g.getInMemoryCryptoManager=n;g.getInMemorySignal=o;g.getConfig=p;g.getDependencies=q;g.getServerRPC=r;g.runInTransaction=s}),98);
__d("WAJobDefinitions",["WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)return;return{priority:a.priority,maxTimeoutMs:a.maxTimeoutMs,jobId:a.jobId}}var i="msgr";a=function(a){var b=a.generateExternalId;return{generateAndUploadPreKeys:function(a){a=h(a);return{type:"generateAndUploadPreKeys",args:{},uniqKey:"generateAndUploadPreKeys",scheduleConfig:(a=a)!=null?a:void 0}},getDevices:function(a,b,c,d){c===void 0&&(c=!1);d=h(d);return{type:"getDevices",args:{users:a,ignoreDhash:c,reason:b},scheduleConfig:(a=d)!=null?a:void 0}},removeDevice:function(a,b,c){c=h(c);return{type:"removeDevice",args:{deviceId:a,identity:b},scheduleConfig:(a=c)!=null?a:void 0}},notifyDeviceChange:function(a,b){b=h(b);return{type:"notifyDeviceChange",args:{users:a},uniqKey:"notifyDeviceChange",scheduleConfig:(a=b)!=null?a:void 0}},requestPreKeyDigest:function(a){a=h(a);return{type:"requestPreKeyDigest",args:{},scheduleConfig:(a=a)!=null?a:void 0}},rotateSignedPreKey:function(a){a=h(a);return{type:"rotateSignedPreKey",args:{},uniqKey:"rotateSignedPreKey",scheduleConfig:(a=a)!=null?a:void 0}},sendPushNotificationSetup:function(a,b,c,d){d=h(d);return{type:"sendPushNotificationSetup",args:{appId:a,deviceId:b,platform:c},uniqKey:"sendPushNotificationSetup",scheduleConfig:(a=d)!=null?a:void 0}},sendWrittenMsg:function(a,b,c){b===void 0&&(b="message");c=h(c);return{type:"sendWrittenMsg",args:{protocolMsgId:a,type:b},scheduleConfig:(a=c)!=null?a:void 0}},createGroup:function(a,b,c,d,e,f){f=h(f);return{type:"createGroup",args:{key:c,subject:a,users:b,extras:c!=null?{deduplicationKey:e,platform:i,clientThreadKey:c,isDualSend:d}:{deduplicationKey:e,platform:i,isDualSend:d}},uniqKey:(a=c)!=null?a:void 0,scheduleConfig:(b=f)!=null?b:void 0}},queryGroups:function(a,b){var c;b=h(b);a==null?c={type:"all"}:c={type:"single",group:a};return{type:"queryGroups",args:c,scheduleConfig:(a=b)!=null?a:void 0}},leaveGroups:function(a,b){b=h(b);return{type:"leaveGroups",args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0}},addGroupParticipants:function(a,b,c){c=h(c);return{type:"addGroupParticipants",args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0}},removeGroupParticipants:function(a,b,c){c=h(c);return{type:"removeGroupParticipants",args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0}},deleteGroups:function(a,b){b=h(b);return{type:"deleteGroups",args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0}},downloadAndHandleMedia:function(a,b,c,d){d=h(d);return{type:"downloadAndHandleMedia",args:{protocolMsgId:a,hash:b,qplEntryPoint:c},scheduleConfig:(a=d)!=null?a:void 0}},reuploadMedia:function(a,b,c,d,e,f){f=h(f);return{type:"reuploadMedia",args:{externalId:a,encProto:d,encIv:e,receiver:b,chatJid:c},scheduleConfig:(a=f)!=null?a:void 0}},syncAbProps:function(a,b){b=h(b);return{type:"syncAbProps",args:{sendHash:a},scheduleConfig:(a=b)!=null?a:void 0}},promoteGroupParticipants:function(a,b,c){c=h(c);return{type:"promoteGroupParticipants",args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0}},demoteGroupParticipants:function(a,b,c){c=h(c);return{type:"demoteGroupParticipants",args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0}},setGroupSubject:function(a,b,c){c=h(c);return{type:"setGroupSubject",args:{group:a,subject:b},scheduleConfig:(a=c)!=null?a:void 0}},sendAppData:function(a,c,d){d=h(d);return{type:"sendAppData",args:{args:a,externalId:(a=c)!=null?a:b()},scheduleConfig:(c=d)!=null?c:void 0}},sendWrittenAppData:function(a,b){b=h(b);return{type:"sendWrittenAppData",args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0}},resendWrittenAppData:function(a,b){b=h(b);return{type:"resendWrittenAppData",args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0}},getSpams:function(a){a=h(a);return{type:"getSpams",args:void 0,scheduleConfig:(a=a)!=null?a:void 0}},computeAndUploadICDCInfo:function(a,b){b=h(b);return{type:"computeAndUploadICDCInfo",args:{sequence:a},scheduleConfig:(a=b)!=null?a:void 0}},handleSpamMsg:function(a){a=h(a);return{type:"handleSpamMsg",args:void 0,scheduleConfig:(a=a)!=null?a:void 0}},sendEphemeralSettingMsg:function(a,c,d,e){e=h(e);return{type:"sendEphemeralSettingMsg",args:{chatJid:a,args:c,externalId:(a=d)!=null?a:b()},scheduleConfig:(c=e)!=null?c:void 0}},updateBackupEntFbidForMedia:function(a,b,c,d){d=h(d);return{type:"updateBackupEntFbidForMedia",args:{deliveryObjectId:a,backupEntFbid:b,traceId:c},scheduleConfig:(a=d)!=null?a:void 0}},sendGroupInviteMsg:function(a,c,d){d=h(d);return{type:"sendGroupInviteMsg",args:{args:a,externalId:(a=c)!=null?a:b()},scheduleConfig:(c=d)!=null?c:void 0}},syncdSyncAllCollections:function(a){a=h(a);return{type:"syncdSyncAllCollections",args:{},scheduleConfig:(a=a)!=null?a:void 0}},requestAllSyncdMissingKeys:function(a){a=h(a);return{type:"requestAllSyncdMissingKeys",args:{},scheduleConfig:(a=a)!=null?a:void 0}}}};b=a({generateExternalId:function(){return d("WAGlobals").getDependencies().generateExternalId()}});g.serializeJobScheduledConfig=h;g.createJobSerializers=a;g.jobSerializers=b}),98);
__d("MAWJobDefinitions",["MAWExternalId","WAJobDefinitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function b(a){return a}c=d("WAJobDefinitions").createJobSerializers({generateExternalId:d("MAWExternalId").generateExternalId});e=babelHelpers["extends"]({},c,{acceptGroupInvite:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{chatId:a,invitedParticipantUserId:c,inviterUserId:b},scheduleConfig:(a=e)!=null?a:void 0,type:"acceptGroupInvite"}},backupMessageWithMedia:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:(b=e)!=null?b:void 0,type:"backupMessageWithMedia"}},deleteMsgsForMe:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"deleteMsgsForMe"}},deleteThread:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{chatId:a},scheduleConfig:(a=b)!=null?a:void 0,type:"deleteThread"}},downloadAndRestoreMedia:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{deliveryObjectId:a,restorationCdnUrl:b,traceId:c},scheduleConfig:(a=e)!=null?a:void 0,type:"downloadAndRestoreMedia"}},forwardMsg:function(a,b,c,e,f,g){g=d("WAJobDefinitions").serializeJobScheduledConfig(g);return{args:{chatJid:a,ephemeralSetting:c,externalId:(a=e)!=null?a:d("MAWExternalId").generateExternalId(),isFirstMsg:f,protocolMsgId:b},scheduleConfig:(c=g)!=null?c:void 0,type:"forwardMsg"}},getCurrentUserDeviceList:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"getCurrentUserDeviceList"}},handleFutureproofMsg:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:{},scheduleConfig:(a=a)!=null?a:void 0,type:"handleFutureproofMsg"}},linkReactionsToMsgs:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{externalIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"linkReactionsToMsgs"}},markThreadAsRead:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{chatJid:a,upTo:b},scheduleConfig:(a=c)!=null?a:void 0,type:"markThreadAsRead",uniqKey:b==null?void 0:b.externalId}},postBackupWriteCompletionHook:function(a){return{args:{traceIdArray:a},type:"postBackupWriteCompletionHook"}},reportUserSpam:function(a,b,c,e,f,g,h,i){h=d("WAJobDefinitions").serializeJobScheduledConfig(h);return{args:{chatJid:c,context:f,frxParams:g,frxTags:e,openMsgs:i,spamFlow:b,userJid:a},scheduleConfig:(c=h)!=null?c:void 0,type:"reportUserSpam"}},requestReuploadMedia:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{hash:b,protocolMsgId:a},scheduleConfig:(b=c)!=null?b:void 0,type:"requestReuploadMedia"}},restoreMessagesFromEncryptedBackups:function(a,b,c,e,f,g,h,i,j,k){k=d("WAJobDefinitions").serializeJobScheduledConfig(k);return{args:{hasMoreAfter:f,hasMoreBefore:e,isPointQuery:g,messages:c,minMsgId:h,startSortKey:j,threadId:b,traceId:i,transportKey:a},scheduleConfig:(f=k)!=null?f:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreThreadsFromEncryptedBackups:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{threads:b,transportKey:a},scheduleConfig:(b=c)!=null?b:void 0,type:"restoreThreadsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"revokeMsgs"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){q=d("WAJobDefinitions").serializeJobScheduledConfig(q);return{args:{args:{duration:i,ephemeralSetting:k,height:f,isFirstMsg:o,isForwarded:n,isPtt:j,jpegThumbnail:c,jpegThumbnailHeight:h,jpegThumbnailWidth:g,openMessageOtid:m,quote:l,width:e},chatJid:a,externalId:(i=p)!=null?i:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:(k=q)!=null?k:void 0,type:"sendMediaMsg"}},sendMsg:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendMsg"}},sendReactionMsg:function(a,b,c,e,f,g){g=d("WAJobDefinitions").serializeJobScheduledConfig(g);return{args:{args:{groupingKey:"",reaction:e,reactToAuthor:c,reactToProtocolMsgId:b},chatJid:a,externalId:(e=f)!=null?e:d("MAWExternalId").generateExternalId()},scheduleConfig:(c=g)!=null?c:void 0,type:"sendReactionMsg"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,i,j,k){k=d("WAJobDefinitions").serializeJobScheduledConfig(k);return{args:{args:g,associatedMsgContent:f,associatedMsgContentExternalId:(g=i)!=null?g:d("MAWExternalId").generateExternalId(),chatJid:a,faviconFile:e,headerFile:c,previewFile:b,xmaArgs:j,xmaMsgExternalId:(f=h)!=null?f:d("MAWExternalId").generateExternalId()},scheduleConfig:(i=k)!=null?i:void 0,type:"sendXMAShareMsg"}},uploadMessagesBackup:function(a,b,c,e,f,g,h,i){i=d("WAJobDefinitions").serializeJobScheduledConfig(i);return{args:{messageIds:a,oldTraceIdMap:g,reactionIds:c,receiptIds:e,threadIds:b,xmaIds:f},scheduleConfig:(a=i)!=null?a:void 0,type:"uploadMessagesBackup",uniqKey:h}},uploadRetroactiveMessageBatch:function(a,b,c,d){return{args:{dbMsgArray:a,includeOffset:b,msgOffset:c,threadId:d},type:"uploadRetroactiveMessageBatch"}},uploadRetroactiveThreadsAndMessages:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"uploadRetroactiveThreadsAndMessages"}}});g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=e}),98);
__d("WAFixedSizeMap",[],(function(a,b,c,d,e,f){a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=new Map();this.$3=0;this.$4=100;this.$4=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1.set(a,b);this.$2.set(this.$3,a);this.$3+=1;b=this.$2.get(this.$3-this.$4-1);b!=null&&(this.$1["delete"](b),this.$2["delete"](this.$3-this.$4-1))};b.clear=function(){this.$1.clear(),this.$2.clear(),this.$3=0};b.size=function(){return this.$1.size};return a}();f.FixedSizeMap=a}),66);
__d("MAWJobActions",["MAWDexieTable","WAFixedSizeMap","WAHex","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAFixedSizeMap").FixedSizeMap)({max:100});function a(a,b){var c=b.args,e=b.type,f=b.uniqKey;b=b.version;b=b===void 0?1:b;return f!=null&&h.has(f)?d("MAWDexieTable").dexieResolve({newlyCreated:"cached",result:h.get(f)}):i(a,{args:c,type:e,uniqKey:f,version:b})}function i(a,b){var c,e=b.args,f=b.scheduleConfig,g=b.type,h=b.uniqKey;b=b.version;b=b===void 0?1:b;c=JSON.stringify([g,(c=h)!=null?c:d("WAHex").randomHex(32)]);var i={backedOffCount:0,current:e,original:e,scheduleConfig:f,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:g,uniqKey:c,version:b,waitUntil:null},j=function(){return a.jobs.add(i).then(function(a){return{id:a,newlyCreated:!0}})};if(h!=null)return a.jobs.where("uniqKey").equals(c).toArray().then(function(b){if(b.length===0)return j();var c=[],e=null;b.forEach(function(b){b.step!=="$finished"?e=b:c.push(a.jobs["delete"](b.jobId))});return d("MAWDexieTable").dexieAll(c).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:j()})});else return j()}function b(a,b){return a.jobs["delete"](b)}function c(a,b){return a.jobs.get(b)}function e(a,b){return a.jobs.put(b)}function f(a){return a.jobs.toArray()}g.recentFinishedJobsCache=h;g.maybeCreateJobWithCache=a;g.maybeCreateJob=i;g.deletePersistedJob=b;g.readPersistedJob=c;g.updatePersistedJob=e;g.readAllPersistedJobs=f}),98);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WAFixedSizeMap","WAHex","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b,c){a.onsuccess=b,a.onerror=c})}function i(a){return h(a).then(function(a){return a.target.result})}function j(a,c,e){return new(b("Promise"))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var k=new(d("WAFixedSizeMap").FixedSizeMap)({max:100});function a(a,c){var d=c.args,e=c.type,f=c.uniqKey;c=c.version;c=c===void 0?1:c;return f!=null&&k.has(f)?b("Promise").resolve({newlyCreated:"cached",result:k.get(f)}):l(a,{args:d,type:e,uniqKey:f,version:c})}function l(a,c){var e,f=c.args,g=c.scheduleConfig,h=c.type,k=c.uniqKey;c=c.version;c=c===void 0?1:c;e=JSON.stringify([h,(e=k)!=null?e:d("WAHex").randomHex(32)]);var l={backedOffCount:0,current:f,original:f,scheduleConfig:g,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:h,uniqKey:e,version:c,waitUntil:null},n=function(){var b,c=a().add(l),d=i(c);if(l.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(k!=null)return j(a,"uniqKey",k).then(function(c){if(c.length===0)return n();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return b("Promise").all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:n()})});else return n()}function m(a,b){return i(a()["delete"](b))}function c(a,b){return i(a().get(b))}function e(a,b){return i(a().put(b))}function f(a){return i(a().getAll())}function n(a){return h(a().clear()).then(function(){})}g.recentFinishedJobsCache=k;g.maybeCreateJobWithCache=a;g.maybeCreateJob=l;g.deletePersistedJob=m;g.readPersistedJob=c;g.updatePersistedJob=e;g.readAllPersistedJobs=f;g.clearJobs=n}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("MAWUIJob",["MAWBridge","MAWGating","MAWIndexedDb","MAWJobActions","MAWJobActionsV2","MAWSignalIndexedDb","MAWTransactionMode","Promise","WAJobOrchestratorTypes","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWGating").isNewJobIDBEnabled()?d("MAWSignalIndexedDb").makeSignalMsgrTransactor(d("MAWTransactionMode").READWRITE)(d("MAWJobActionsV2").maybeCreateJobWithCache):d("MAWIndexedDb").makeMsgrTransactor({jobs:d("MAWTransactionMode").READWRITE})(d("MAWJobActions").maybeCreateJobWithCache),i={priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION};a={fireAndForget:function(a){c("promiseDone")(h(babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:i})).then(function(a){a.newlyCreated===!0&&d("MAWBridge").getBridge().fireAndForget("backend","runJob",{id:a.id})}))},waitUntilCompleted:function(a){return h(babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:i})).then(function(a){if(a.newlyCreated==="cached")return b("Promise").resolve(a.result);else{a=d("MAWBridge").getBridge().sendAndReceive("backend","runJob",{id:a.id});return a}})},waitUntilPersisted:function(a){return h(babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:i})).then(function(a){a.newlyCreated===!0&&d("MAWBridge").getBridge().fireAndForget("backend","runJob",{id:a.id})})}};g.UI_ACTION_PRIORITY=i;g.UIJobStarters=a}),98);
__d("MAWTimedJob",["FBLogger","MAWJobDefinitions","MAWMaybeWithTimeout","MAWUIJob","MAWWaitForBackendSetup","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4;function a(a,b){b===void 0&&(b=h);return{fireAndForget:function(){var b=arguments;c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup(a).then(function(){d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers[a].apply(null,b))}))},waitUntilCompleted:function(){var e=arguments;return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers[a].apply(null,e))}),b,function(){throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Failed to complete execution of job "+a+" in time")},a)},waitUntilPersisted:function(){var e=arguments;return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers[a].apply(null,e))}),b,function(){throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Failed to complete execution of job "+a+" in time")},a)}}}b={waitUntilCompleted:function(a,b){b===void 0&&(b=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilCompleted(a)}),b,function(){throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Failed to complete execution of job "+a.type+" in time")},a.type)},waitUntilPersisted:function(a,b){b===void 0&&(b=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilPersisted(a)}),b,function(){throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Failed to complete execution of job "+a.type+" in time")},a.type)}};g.DEFAULT_TIMEOUT_MS=h;g.timedNewJob=a;g.TimedUIJobStarters=b}),98);
__d("MAWJob.bs",["MAWTimedJob"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function b(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function c(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function e(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function f(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function h(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function i(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function j(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function k(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function l(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function m(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function n(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function o(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function p(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function q(a,b){return d("MAWTimedJob").timedNewJob(a,b)}function r(a,b){return d("MAWTimedJob").timedNewJob(a,b)}a={newJobWithTimeout0:a,newJobWithTimeout1:b,newJobWithTimeout10:m,newJobWithTimeout11:n,newJobWithTimeout12:o,newJobWithTimeout13:p,newJobWithTimeout14:q,newJobWithTimeout15:r,newJobWithTimeout2:c,newJobWithTimeout3:e,newJobWithTimeout4:f,newJobWithTimeout5:h,newJobWithTimeout6:i,newJobWithTimeout7:j,newJobWithTimeout8:k,newJobWithTimeout9:l};b=d("MAWTimedJob").timedNewJob("getDevices",6e4);m=d("MAWTimedJob").timedNewJob("markThreadAsRead",6e4);n=d("MAWTimedJob").timedNewJob("sendMediaMsg",6e4);o=d("MAWTimedJob").timedNewJob("sendMsg",6e4);p=d("MAWTimedJob").timedNewJob("getCurrentUserDeviceList",6e4);q=d("MAWTimedJob").timedNewJob("addGroupParticipants",6e4);r=d("MAWTimedJob").timedNewJob("removeGroupParticipants",6e4);c=d("MAWTimedJob").timedNewJob("promoteGroupParticipants",6e4);e=d("MAWTimedJob").timedNewJob("demoteGroupParticipants",6e4);f=d("MAWTimedJob").timedNewJob("leaveGroups",6e4);h=d("MAWTimedJob").timedNewJob("removeDevice",6e4);i=d("MAWTimedJob").timedNewJob("setGroupSubject",6e4);j=d("MAWTimedJob").timedNewJob("getSpams",6e4);k=d("MAWTimedJob").timedNewJob("forwardMsg",6e4);l=d("MAWTimedJob").timedNewJob("sendReactionMsg",6e4);var s=d("MAWTimedJob").timedNewJob("restoreMessagesFromEncryptedBackups",6e4),t=d("MAWTimedJob").timedNewJob("restoreThreadsFromEncryptedBackups",6e4),u=d("MAWTimedJob").timedNewJob("revokeMsgs",6e4),v=d("MAWTimedJob").timedNewJob("deleteMsgsForMe",6e4),w=d("MAWTimedJob").timedNewJob("deleteThread",6e4),x=d("MAWTimedJob").timedNewJob("uploadRetroactiveThreadsAndMessages",6e4),y=d("MAWTimedJob").timedNewJob("uploadRetroactiveMessageBatch",6e4),z=d("MAWTimedJob").timedNewJob("updateBackupEntFbidForMedia",6e4),A=d("MAWTimedJob").timedNewJob("backupMessageWithMedia",6e4),B=d("MAWTimedJob").timedNewJob("downloadAndRestoreMedia",6e4),C=d("MAWTimedJob").timedNewJob("queryGroups",6e4),D=d("MAWTimedJob").timedNewJob("acceptGroupInvite",6e4),E=d("MAWTimedJob").timedNewJob("uploadMessagesBackup",6e4),F=d("MAWTimedJob").timedNewJob("postBackupWriteCompletionHook",6e4);g.Internal=a;g.getDevices=b;g.markThreadAsRead=m;g.sendMediaMsg=n;g.sendMsg=o;g.getCurrentUserDeviceList=p;g.addGroupParticipants=q;g.removeGroupParticipants=r;g.promoteGroupParticipants=c;g.demoteGroupParticipants=e;g.leaveGroups=f;g.removeDevice=h;g.setGroupSubject=i;g.getSpams=j;g.forwardMsg=k;g.sendReactionMsg=l;g.restoreMessagesFromEncryptedBackups=s;g.restoreThreadsFromEncryptedBackups=t;g.revokeMsgs=u;g.deleteMsgsForMe=v;g.deleteThread=w;g.uploadRetroactiveThreadsAndMessages=x;g.uploadRetroactiveMessageBatch=y;g.updateBackupEntFbidForMedia=z;g.backupMessageWithMedia=A;g.downloadAndRestoreMedia=B;g.queryGroups=C;g.acceptGroupInvite=D;g.uploadMessagesBackup=E;g.postBackupWriteCompletionHook=F}),98);
__d("MAWJidUtils.bs",["WAJids","bs_js_exn"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return d("WAJids").switchOnChatJidType(a,{group:function(a){return b.group(a)},lidUser:function(a){return c("bs_js_exn").raiseError("Cannot handle lidUserJid in messenger")},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return c("bs_js_exn").raiseError("Cannot handle phoneUserJid in messenger")}})}function a(a){return h(a,{group:function(a){return!1},user:function(a){return!0}})}g.switchOnChatJidType=h;g.isOneToOneThreadJid=a}),98);
__d("MAWUIThreadCache",["MAWBackendBridge.bs","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function a(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=a.threadId;if(!h.has(c)){f.next=3;break}return f.abrupt("return",b("Promise").resolve(h.get(c)));case 3:f.next=5;return b("regeneratorRuntime").awrap(d("MAWBackendBridge.bs").getThreadJidByChatId({threadId:c}).sendAndReceive());case 5:e=f.sent;e!=null&&h.set(c,e);return f.abrupt("return",e);case 8:case"end":return f.stop()}},null,this)}g.getThreadJidByChatId=a}),98);